{{/*  
	The version selector dropdown.
	It is only used when in /docs/ 
*/}}
{{- $isRoot := false }}
{{- $currentVer := index (findRE `^(\/?)docs\/(docs\/)?[^\/]*\/` .Page.RelPermalink 1) 0 }}
{{- $currentVer = replace $currentVer "docs/docs/" "/docs/" }}
{{- $currentVer = replace $currentVer "//" "/" }}
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	{{- range where .Site.Params.versions "url" $currentVer -}}
        {{ $versionName := .version }}
        {{- if .latest }}
        	{{- $versionName = printf "%s (%s)" .version "Latest" }}
        {{- end }}
		{{- $versionName }}
    {{- else -}}
		{{- $isRoot = true }}
		Versions
	{{- end -}}
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	{{- $path := "" }}
	{{- if (and (.Site.Params.version_menu_pagelinks) (not $isRoot)) }}
		{{- $path = replaceRE `^\/docs\/[^\/]*\/` "" .Page.RelPermalink  1 }}
	{{- end }}
	{{- range .Site.Params.versions }}
        {{- $versionName := .version }}
        {{- if .latest }}
            {{- $versionName = printf "%s (%s)" .version "Latest" }}
        {{- end }}
		<a class="dropdown-item" href="{{ .url }}{{ $path }}">{{ $versionName }}</a>
	{{- end }}
</div>