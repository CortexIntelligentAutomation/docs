<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.91.2" /><link rel="canonical" type="text/html" href="/docs/getting-started/on-premise/install-innovation-only/advanced/">
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Advanced Setup | Cortex</title><meta property="og:title" content="Advanced Setup" />
<meta property="og:description" content="Supporting information about installing Cortex Innovation with non-default configurations." />
<meta property="og:type" content="website" />
<meta property="og:url" content="/docs/getting-started/on-premise/install-innovation-only/advanced/" /><meta property="og:site_name" content="Cortex" />

<meta itemprop="name" content="Advanced Setup">
<meta itemprop="description" content="Supporting information about installing Cortex Innovation with non-default configurations."><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Advanced Setup"/>
<meta name="twitter:description" content="Supporting information about installing Cortex Innovation with non-default configurations."/>





<link rel="preload" href="/scss/main.min.42ca918ff01f3baf0c46b62950a7adcbc69284274167c28d2f053c02fd28ffdb.css" as="style">
<link href="/scss/main.min.42ca918ff01f3baf0c46b62950a7adcbc69284274167c28d2f053c02fd28ffdb.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.5.1.min.js"
  integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
  crossorigin="anonymous"></script>

<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>




  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg id="Layer_4_copy" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 1388 475.1" style="enable-background:new 0 0 1388 475.1"><style>.st0{fill:#3b8fce}.st1{fill:#262056}.st2{fill:#a1c429}.st3{fill:#fff}.st4{fill:url(#SVGID_1_)}.st5{opacity:.6;fill:url(#SVGID_2_)}.st6{filter:url(#Adobe_OpacityMaskFilter)}.st7{fill:url(#SVGID_4_)}.st8{mask:url(#SVGID_3_);fill:#fff}.st9{fill:#3f3f3e}</style><path class="st0" d="M122.1 231.7c0-15.7 3.6-30.5 9.9-43.8l-81.1-46.8c-22.9 43.5-28.5 93.3-15.7 141 13.5 50.3 45.7 92.3 90.8 118.3 29 16.7 56.9 24.9 89.6 26v-93.7c-52.3-4-93.5-47.6-93.5-101z"/><path class="st1" d="M223.5 130.3c34.7.0 65.3 17.5 83.6 44.1l81.1-46.8c-35.6-56.2-98-90.8-164.9-90.8-34 0-67.6 9-97.3 26.1-29 16.7-50 36.8-67.3 64.6l81.1 46.8c18.4-26.5 49-44 83.7-44z"/><path class="st2" d="M396.1 141.1 315 188c6.3 13.2 9.9 28.1 9.9 43.7.0 53.3-41.2 97-93.5 101v93.7c103.8-4.1 187-89.9 187-194.7C418.4 198.2 411.5 170 396.1 141.1z"/><g><path class="st3" d="M223.5 231.7l-65.8-38c-21 36.4-8.5 82.9 27.8 103.9 12.1 7 24 10.2 38 10.2V231.7z"/></g><g><path class="st3" d="M223.5 231.7l65.8-38c-21-36.4-67.5-48.8-103.9-27.8-12.1 7-20.8 15.7-27.8 27.8l65.9 38z"/></g><g><path class="st3" d="M223.5 231.7v76c42 0 76-34 76-76 0-14-3.2-25.9-10.2-38l-65.8 38z"/></g><g><radialGradient id="SVGID_1_" cx="223.5157" cy="231.6926" r="76.1085" gradientUnits="userSpaceOnUse"><stop offset="0" style="stop-color:#969695"/><stop offset="1" style="stop-color:#3F3F3E"/></radialGradient><path class="st4" d="M147.4 231.7c0-42 34.1-76.1 76.1-76.1s76.1 34.1 76.1 76.1-34.1 76.1-76.1 76.1C181.5 307.8 147.4 273.7 147.4 231.7z"/><linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="223.5157" y1="155.5859" x2="223.5157" y2="307.7993"><stop offset="0" style="stop-color:#FFFFFF"/><stop offset="1" style="stop-color:#3F3F3E"/></linearGradient><path class="st5" d="M147.4 231.7c0-42 34.1-76.1 76.1-76.1s76.1 34.1 76.1 76.1-34.1 76.1-76.1 76.1C181.5 307.8 147.4 273.7 147.4 231.7z"/><defs><filter id="Adobe_OpacityMaskFilter" filterUnits="userSpaceOnUse" x="177.2" y="172.1" width="92.7" height="59.5"><feColorMatrix type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"/></filter></defs><mask maskUnits="userSpaceOnUse" x="177.2" y="172.1" width="92.7" height="59.5" id="SVGID_3_"><g class="st6"><linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="220.0409" y1="123.6788" x2="220.0409" y2="238.3832"><stop offset="0" style="stop-color:#FFFFFF"/><stop offset="1" style="stop-color:#000000"/></linearGradient><rect x="158.4" y="123.7" class="st7" width="123.3" height="114.7"/></g></mask><path class="st8" d="M177.2 201.9c0-16.5 20.7-29.8 46.3-29.8s46.3 13.3 46.3 29.8c0 16.4-20.7 29.8-46.3 29.8s-46.3-13.3-46.3-29.8z"/></g><g><path class="st9" d="M549.7 146c42.6.0 62.7 24.3 62.7 24.3l-17.9 27.8s-17-17.6-42.6-17.6c-30.1.0-49.6 22.7-49.6 50.6.0 27.5 19.8 51.2 50.9 51.2 27.5.0 48-20.8 48-20.8l15.7 28.8s-23.4 26.5-67.2 26.5c-54.1.0-88.6-38.1-88.6-85.4.0-46.4 34.5-85.4 88.6-85.4z"/><path class="st9" d="M697.7 146c49.9.0 89.9 35.5 89.9 85.4.0 50.2-40 85.4-89.6 85.4-49.9.0-89.9-35.2-89.9-85.4.0-49.9 40-85.4 89.6-85.4zM698 282.3c26.3.0 48.3-20.5 48.3-50.9.0-30.1-22.1-50.9-48.3-50.9-26.6.0-48.6 20.8-48.6 50.9.0 30.4 22.1 50.9 48.6 50.9z"/><path class="st9" d="M796.6 149.8h39V178c0 6.1-.6 11.5-.6 11.5h.6c7.4-23.4 26.9-41.9 51.9-41.9 3.8.0 7.3.6 7.3.6v40s-4.2-.6-9.6-.6c-17.3.0-36.8 9.9-44.5 34.2-2.6 8-3.5 16.9-3.5 26.6V313h-40.6V149.8z"/><path class="st9" d="M904.2 105.4h40.7v47H982v32.3h-37.1v63.4c0 26.9 21.1 30.7 32.3 30.7 4.5.0 7.4-.6 7.4-.6v35.5s-4.8 1-12.5 1c-22.7.0-67.9-6.7-67.9-61.4V105.4z"/><path class="st9" d="M1065.5 146c47 0 72.3 34.2 72.3 77.4.0 4.8-1 15.7-1 15.7h-112.6c2.6 28.5 24.6 43.2 49 43.2 26.2.0 47.1-17.9 47.1-17.9l15.7 29.1s-25 23.4-65.6 23.4c-54.1.0-87.7-39-87.7-85.4C982.6 181.2 1016.9 146 1065.5 146zM1096.9 211.3c-.6-22.1-14.4-33.9-32.3-33.9-20.8.0-35.2 12.8-39 33.9h71.3z"/><path class="st9" d="M1236 230.5l52.5-80.6h-46.1l-25.3 44.5c-2.6 4.2-5.4 10.2-5.4 10.2h-.6s-2.9-6.1-5.4-10.2l-25.3-44.5h-46.1l52.5 80.6L1133 313h45.1l28.5-47.4c2.3-3.5 4.5-8.6 4.5-8.6h.6s2.3 5.1 4.5 8.6l28.5 47.4h45.1L1236 230.5z"/><g><path class="st9" d="M1313.8 149.8c9.5.0 17.2 7.7 17.2 17.4.0 9.8-7.6 17.5-17.2 17.5-9.4.0-16.9-7.7-16.9-17.5C1296.8 157.6 1304.4 149.8 1313.8 149.8zm0 32.3c8.2.0 14.4-6.5 14.4-14.9.0-8.3-6.2-14.8-14.4-14.8-8 0-14.1 6.5-14.1 14.8C1299.6 175.6 1305.8 182.1 1313.8 182.1zM1308.1 157.9h6.7c3.3.0 5.6 2.2 5.6 5.6.0 2.8-1.8 4.5-3.5 4.9v.1s.2.2.6 1.1l3.6 7.1h-3l-3.7-7.6h-3.6v7.6h-2.7V157.9zM1314.3 166.9c2 0 3.3-1.3 3.3-3.5.0-2.1-1.3-3.3-3.3-3.3h-3.5v6.8h3.5z"/></g></g></svg></span><span class="text-uppercase font-weight-bold">Cortex</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a id="documentation" class="nav-link" href="/docs/" ><span>Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a  class="nav-link" href="/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a id="community" class="nav-link" href="https://community.cortex.co.uk/" target="_blank" ><span>Community</span></a>
			</li>
			
			
			<li class="nav-item dropdown d-block pl-2">
				<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
	Releases
</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
	
	<a class="dropdown-item" href="http://v2022.docs.cortex-ia.com/">v2022 (latest)</a>
	
	<a class="dropdown-item" href="https://community.cortex.co.uk/">v7.2</a>
	
</div>

			</li>
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block">



<input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.d033a2151a286b395a6544410eed85fc.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="50"
>

</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/docs/getting-started/on-premise/install-innovation-only/advanced/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">Advanced Setup</h1>
<div class="lead">Supporting information about installing Cortex Innovation with non-default configurations.</div>




    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-27c95e9e19a361fc42704f7dc74835e5">Advanced Application Server and Load Balancer Configuration Changes</a></li>


    
  
    
    
	
<li>2: <a href="#pg-e89dbf42fe66aa13ba7cac5050f57f99">Configure Firewalls</a></li>


    
  
    
    
	
<li>3: <a href="#pg-ba4fd09d99fc26e56ae5fa878d6fa11b">Configure the Gateway Databases to use Transparent Data Encryption</a></li>


    
  
    
    
	
<li>4: <a href="#pg-473627ed5fdaf469986dd76997848b94">Create Self-Signed Certificates</a></li>


    
  
    
    
	
<li>5: <a href="#pg-ee76c0361d921fa7f68149bce1441127">Encrypt Text</a></li>


    
  
    
    
	
<li>6: <a href="#pg-5e3a44a25a94bb5b847acae8a02fc8bb">Port Requirements for Application Servers and Load Balancer</a></li>


    
  
    
    
	
<li>7: <a href="#pg-2154296292afc725b4661ad2c7ef9ec7">Rollover CA certificates</a></li>


    
  
    
    
	
<li>8: <a href="#pg-0ae9cc41688a1f099f28b887538ab98d">SSL Best Practices</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-27c95e9e19a361fc42704f7dc74835e5">1 - Advanced Application Server and Load Balancer Configuration Changes</h1>
    <div class="lead">Information about installing Cortex Innovation with non-default installation values.</div>
	<h1 id="advanced-application-server-and-load-balancer-configuration-changes">Advanced Application Server and Load Balancer Configuration Changes</h1>
<p>Advanced configuration (such as port changes) can be undertaken by taking the following steps before running the PowerShell script. Some values will be modified by the script and they will take precedence, but those parameters can be removed from the script and this file used entirely if required.</p>
<h2 id="multiple-server-with-ha">Multiple Server With HA</h2>
<ol>
<li>
<p>In the <code>Cortex Innovation 2022.9 - Installation Scripts</code> folder, locate the file <code>Cortex.Innovation.Install.Config.json</code> and open it with a text editor.</p>
</li>
<li>
<p>Change the configuration file according to your cluster, referring to the following example and details:</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;customers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
        <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Customer1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span>          <span style="color:#204a87;font-weight:bold">&#34;isPrimary&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;rules&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">&#34;clientConnectionEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8001&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;clusterConnectionEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8002&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;leaseDriverEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8003&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;serviceConnectionEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8004&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;httpGatewayEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;9080&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;reverseProxyEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;9081&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;applicationPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10010-10500&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;ephemeralPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10501-20000&#34;</span>
          <span style="color:#000;font-weight:bold">},</span>
          <span style="color:#204a87;font-weight:bold">&#34;loadBalancer&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">            <span style="color:#204a87;font-weight:bold">&#34;installDirectory&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;%ProgramData%\\loadbalancer&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">            <span style="color:#204a87;font-weight:bold">&#34;iPAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;192.168.20.178&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span>            <span style="color:#204a87;font-weight:bold">&#34;loadBalancerSnmpPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;162&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;snmpReceiverServicePort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10001&#34;</span><span style="color:#000;font-weight:bold">,</span>
<span style="display:block;width:100%;background-color:#dfdfdf">            <span style="color:#204a87;font-weight:bold">&#34;loadBalancerTlsPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;443&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">            <span style="color:#204a87;font-weight:bold">&#34;apiGatewayServicePort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8722&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">            <span style="color:#204a87;font-weight:bold">&#34;adminCertificate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;loadBalancerCertificate&#34;</span>
</span>          <span style="color:#000;font-weight:bold">},</span>
          <span style="color:#204a87;font-weight:bold">&#34;servers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
            <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;serverName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;app-server1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;iPAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;192.168.1.1&#34;</span>
</span>            <span style="color:#000;font-weight:bold">},</span>
            <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;serverName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;app-server2&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;iPAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;192.168.1.2&#34;</span>
</span>            <span style="color:#000;font-weight:bold">},</span>
            <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;serverName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;app-server3&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;iPAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;192.168.1.3&#34;</span>
</span>            <span style="color:#000;font-weight:bold">}</span>
          <span style="color:#000;font-weight:bold">]</span>
        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">],</span>
      <span style="color:#204a87;font-weight:bold">&#34;servers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">        <span style="color:#204a87;font-weight:bold">&#34;app-server1&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span>          <span style="color:#204a87;font-weight:bold">&#34;faultDomain&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;fd:/fd1&#34;</span><span style="color:#000;font-weight:bold">,</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;serverCertificate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;serverCert&#34;</span>
</span>        <span style="color:#000;font-weight:bold">},</span>
<span style="display:block;width:100%;background-color:#dfdfdf">        <span style="color:#204a87;font-weight:bold">&#34;app-server2&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span>          <span style="color:#204a87;font-weight:bold">&#34;faultDomain&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;fd:/fd2&#34;</span><span style="color:#000;font-weight:bold">,</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;serverCertificate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;serverCert&#34;</span>
</span>        <span style="color:#000;font-weight:bold">},</span>
<span style="display:block;width:100%;background-color:#dfdfdf">        <span style="color:#204a87;font-weight:bold">&#34;app-server3&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span>          <span style="color:#204a87;font-weight:bold">&#34;faultDomain&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;fd:/fd3&#34;</span><span style="color:#000;font-weight:bold">,</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;serverCertificate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;serverCert&#34;</span>
</span>        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#204a87;font-weight:bold">&#34;rules&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;windowsSmbRemoteRegistry&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
          <span style="color:#4e9a06">&#34;135&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;137&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;138&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;139&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;445&#34;</span>
        <span style="color:#000;font-weight:bold">],</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqAmqpPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
          <span style="color:#4e9a06">&#34;5671&#34;</span>
        <span style="color:#000;font-weight:bold">],</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqEpmdPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;4369&#34;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqErlangDistributionClientPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;35672-35682&#34;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqErlangDistributionServerPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;25672&#34;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqManagementApiPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;15671&#34;</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#204a87;font-weight:bold">&#34;serverCertificates&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;serverCert&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pfxCertificatePath&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;C:\\Certificates\\wildCardCert.pfx&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pfxCertificatePassword&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pfxPassword&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pemRootCertificatePath&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&#34;</span>
</span>        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#204a87;font-weight:bold">&#34;adminCertificates&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;loadBalancerCert&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pfxCertificatePath&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;C:\\Certificates\\lbCert.pfx&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pfxCertificatePassword&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pfxPassword&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pemRootCertificatePath&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&#34;</span>
</span>        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
    </code></pre></td></tr></table>
</div>
</div>
<table>
<thead>
<tr>
<th>Line</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>A name identifying the platform being installed. This should have no spaces or symbols. It will be appended to the node names that are displayed in the Service Fabric management tool.</td>
</tr>
<tr>
<td>16-24</td>
<td>If the bundled load balancer is not being used, delete these lines</td>
</tr>
<tr>
<td>17</td>
<td>A local empty or non-existent directory on the load balancer server that the load balancer can be installed in. The directory path will be created if it does not exist. The installation user must have permissions to create and write to directories here. Ensure that all backslashes are escaped with another backslash. Environment variables may be used.</td>
</tr>
<tr>
<td>18</td>
<td>The IPv4 address of the server that the load balancer should run on.</td>
</tr>
<tr>
<td>21</td>
<td>The port that the HTTPS load balancer server should run on. This port should not be in use by anything else.</td>
</tr>
<tr>
<td>22</td>
<td>The port that the API Gateway Service is running on the Application Servers. This should be 8722.</td>
</tr>
<tr>
<td>23</td>
<td>The name of a certificate entry in the adminCertificates section. If this line is removed, an auto-generated self-signed certificate will be used.</td>
</tr>
<tr>
<td>27, 31, 35</td>
<td>The short computer names of the Application Servers. These must not contain the domain. The installation will be run on the first of these nodes.</td>
</tr>
<tr>
<td>28, 32, 36</td>
<td>The respective IPv4 addresses of the Application Servers.</td>
</tr>
<tr>
<td>42, 46, 50</td>
<td>These keys should be changed to the computer names of the Application Servers to match those on lines 26, 30 and 24</td>
</tr>
<tr>
<td>44, 48, 52</td>
<td>The name of a certificate entry in the serverCertificates section. This should be the same for all Application Servers. If these lines are removed, an auto-generated self-signed certificate will be used. Self-signed certificates are not recommended for production systems.</td>
</tr>
<tr>
<td>73-75</td>
<td>Skip configuring these lines if self-signed certificates are being used.</td>
</tr>
<tr>
<td>80-82</td>
<td>Skip configuring these lines if self-signed certificates are being used or if the bundled load balancer is not being used.</td>
</tr>
<tr>
<td>74</td>
<td>This is the local path of a .PFX certificate file on the first Application Server, containing a full chain certificate with private key. Ensure that all backslashes are escaped with another backslash. Environment variables cannot be used.</td>
</tr>
<tr>
<td>75</td>
<td>The password used to secure the .PFX file.</td>
</tr>
<tr>
<td>76</td>
<td>This only needs to be used if the installation has failed due to a missing root certificate. See <a href="/docs/reference/troubleshooting/installation#ts-no-root-certificate">Troubleshooting Root Certificate Error</a> for information.</td>
</tr>
<tr>
<td>81</td>
<td>This is the local path of a .PFX certificate file on the first Application Server, containing a full chain certificate with private key. Ensure that all backslashes are escaped with another backslash. Environment variables cannot be used.</td>
</tr>
<tr>
<td>82</td>
<td>The password used to secure the .PFX file.</td>
</tr>
<tr>
<td>83</td>
<td>This only needs to be used if the installation has failed due to a missing root certificate. See <a href="/docs/reference/troubleshooting/installation#ts-no-root-certificate">Troubleshooting Root Certificate Error</a> for information.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Save and close the config file.</p>
</li>
</ol>
<h2 id="single-server-without-ha">Single Server Without HA</h2>
<ol>
<li>
<p>In the <code>Cortex Innovation 2022.9 - Installation Scripts</code> folder, locate the file <code>Cortex.Innovation.Install.Config.json</code> and open it with a text editor.</p>
</li>
<li>
<p>Change the configuration file according to your cluster, referring to the following example and details:</p>
<div class="highlight"><div style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span></span><span style="display:block;width:100%;background-color:#dfdfdf"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">    <span style="color:#000;font-weight:bold">{</span>
      <span style="color:#204a87;font-weight:bold">&#34;customers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
        <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;name&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;Customer1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span>          <span style="color:#204a87;font-weight:bold">&#34;isPrimary&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#204a87;font-weight:bold">true</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#204a87;font-weight:bold">&#34;rules&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
            <span style="color:#204a87;font-weight:bold">&#34;clientConnectionEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8001&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;clusterConnectionEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8002&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;leaseDriverEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8003&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;serviceConnectionEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;8004&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;httpGatewayEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;9080&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;reverseProxyEndpointPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;9081&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;applicationPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10010-10500&#34;</span><span style="color:#000;font-weight:bold">,</span>
            <span style="color:#204a87;font-weight:bold">&#34;ephemeralPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;10501-20000&#34;</span>
          <span style="color:#000;font-weight:bold">},</span>
          <span style="color:#204a87;font-weight:bold">&#34;servers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
            <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;serverName&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;app-server1&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">              <span style="color:#204a87;font-weight:bold">&#34;iPAddress&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;192.168.1.1&#34;</span>
</span>            <span style="color:#000;font-weight:bold">}</span>
          <span style="color:#000;font-weight:bold">]</span>
        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">],</span>
      <span style="color:#204a87;font-weight:bold">&#34;servers&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">        <span style="color:#204a87;font-weight:bold">&#34;app-server1&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
</span>          <span style="color:#204a87;font-weight:bold">&#34;faultDomain&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;fd:/fd1&#34;</span><span style="color:#000;font-weight:bold">,</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;serverCertificate&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;serverCert&#34;</span>
</span>        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#204a87;font-weight:bold">&#34;rules&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;windowsSmbRemoteRegistry&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
          <span style="color:#4e9a06">&#34;135&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;137&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;138&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;139&#34;</span><span style="color:#000;font-weight:bold">,</span>
          <span style="color:#4e9a06">&#34;445&#34;</span>
        <span style="color:#000;font-weight:bold">],</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqAmqpPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">[</span>
          <span style="color:#4e9a06">&#34;5671&#34;</span>
        <span style="color:#000;font-weight:bold">],</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqEpmdPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;4369&#34;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqErlangDistributionClientPorts&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;35672-35682&#34;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqErlangDistributionServerPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;25672&#34;</span><span style="color:#000;font-weight:bold">,</span>
        <span style="color:#204a87;font-weight:bold">&#34;rabbitMqManagementApiPort&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;15671&#34;</span>
      <span style="color:#000;font-weight:bold">},</span>
      <span style="color:#204a87;font-weight:bold">&#34;serverCertificates&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
        <span style="color:#204a87;font-weight:bold">&#34;serverCert&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#000;font-weight:bold">{</span>
<span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pfxCertificatePath&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;C:\\Certificates\\wildCardCert.pfx&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pfxCertificatePassword&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;pfxPassword&#34;</span><span style="color:#000;font-weight:bold">,</span>
</span><span style="display:block;width:100%;background-color:#dfdfdf">          <span style="color:#204a87;font-weight:bold">&#34;pemRootCertificatePath&#34;</span><span style="color:#000;font-weight:bold">:</span> <span style="color:#4e9a06">&#34;&#34;</span>
</span>        <span style="color:#000;font-weight:bold">}</span>
      <span style="color:#000;font-weight:bold">}</span>
    <span style="color:#000;font-weight:bold">}</span>
    </code></pre></td></tr></table>
</div>
</div>
<table>
<thead>
<tr>
<th>Line</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>A name identifying the platform being installed. This should have no spaces or symbols. It will be appended to the node names that are displayed in the Service Fabric management tool.</td>
</tr>
<tr>
<td>18</td>
<td>The short computer names of the node. This must not contain the domain. The installation will be run on the this node.</td>
</tr>
<tr>
<td>19</td>
<td>The IPv4 address of the node.</td>
</tr>
<tr>
<td>25</td>
<td>This key should be changed to the computer names of the node to match that on line 18</td>
</tr>
<tr>
<td>27</td>
<td>The name of a certificate entry in the serverCertificates section. If this line is removed, an auto-generated self-signed certificate will be used. Self-signed certificates are not recommended for production systems.</td>
</tr>
<tr>
<td>48-50</td>
<td>Skip configuring these lines if self-signed certificates are being used.</td>
</tr>
<tr>
<td>48</td>
<td>This is the local path of a .PFX certificate file on the server, containing a full chain certificate with private key. Ensure that all backslashes are escaped with another backslash. Environment variables cannot be used.</td>
</tr>
<tr>
<td>49</td>
<td>The password used to secure the .PFX file.</td>
</tr>
<tr>
<td>50</td>
<td>This only needs to be used if the installation has failed due to a missing root certificate. See <a href="/docs/reference/troubleshooting/installation#ts-no-root-certificate">Troubleshooting Root Certificate Error</a> for information.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Save and close the config file.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e89dbf42fe66aa13ba7cac5050f57f99">2 - Configure Firewalls</h1>
    <div class="lead">Information about configuring Firewalls, e.g. adding rules.</div>
	<h1 id="configure-firewalls">Configure Firewalls</h1>
<h2 id="add-inbound-rules-to-windows-firewall">Add Inbound Rules to Windows Firewall</h2>
<p>To set up inbound rules for Windows Firewall take the following steps for each rule that you want to add:</p>
<ol>
<li>Navigate to <code>Start</code> → <code>Administrative Tools</code> → <code>Windows Firewall with Advanced Security</code>.</li>
<li>In the left-hand panel, click on the <code>Inbound Rules</code> node.</li>
<li>In the right-hand panel, click on <code>New Rule</code>.</li>
<li>In the New Inbound Rule Wizard, select the <code>Port</code> option then click on the <code>Next &gt;</code>
button.</li>
<li>Select either <code>TCP</code> or <code>UDP</code> depending on the rule that is being made.</li>
<li>Select <code>Specific local ports</code>.</li>
<li>Enter the required ports in a comma separated list (e.g. <code>443, 80</code>) in the text box and press <code>Next &gt;</code>.</li>
<li>Select <code>Allow the connection</code> then click <code>Next &gt;</code>.</li>
<li>Click <code>Next &gt;</code> again, then add an identifiable name for the rule</li>
<li>Click <code>Finish</code>.</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ba4fd09d99fc26e56ae5fa878d6fa11b">3 - Configure the Gateway Databases to use Transparent Data Encryption</h1>
    <div class="lead">Information about configuring Gateway Databases to use Transparent Data Encryption.</div>
	<h1 id="configure-the-gateway-databases-to-use-transparent-data-encryption">Configure the Gateway Databases to use Transparent Data Encryption</h1>
<p>Once the <a href="/docs/getting-started/on-premise/install-innovation-only/multiple-server-with-ha/setup-gateway">Gateway Setup</a> steps have been completed, if you wish to encrypt the databases using <a href="https://docs.microsoft.com/en-us/sql/relational-databases/security/encryption/transparent-data-encryption?view=sql-server-ver15">Transparent Data Encryption</a> (TDE) for improved security, this should now be performed.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    TDE cannot be applied to SQL Express, only SQL Server instances.

</div>

<p>Enabling TDE on the databases ensures that the data is encrypted on disk. The process to do this requires that you:</p>
<ul>
<li>Create a master key in the master database with a strong password. This password must be remembered and/or saved in a secure location to enable decryption of the database later.</li>
<li>Create a certificate within SQL Server.</li>
<li>Backup the certificate and store it in a secure location. If a database needed to be restored elsewhere for any reason the certificate will need to be imported to the new server.</li>
<li>Create a database encryption key in each user database to be encrypted.</li>
<li>Enable encryption on the database.</li>
</ul>
<p>To enable TDE on the suite of Gateway Databases you should complete the following steps:</p>
<ol>
<li>
<p>Open SQL Server Management Studio.</p>
</li>
<li>
<p>Open the <code>Cortex.Install.TDE.sql</code> script included within the <code>Cortex Innovation 2022.9 - Web App Server Install Scripts</code> folder.


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    This script will attempt to encrypt all Cortex Databases that exist on the system. Any that do not exist will be skipped. If you do not wish to encrypt all existing Cortex Databases then you should contact <a href="https://support.cortex.co.uk/">Cortex Service Portal</a> for assistance with script modification.

</div>
</p>
</li>
<li>
<p>Set the <code>@sPassword</code> parameter value to a password that you wish to use. 

<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    This password must be set to a value that is not a blank or empty string, it cannot be <code>null</code> and the script will not execute if it is not changed from the pre-populated value of <code>StrongPassword</code>. The password must also meet your system’s minimum security requirements.

</div>
</p>
</li>
<li>
<p>You can change the names of the certificate and the name of the master key by changing the <code>@sCertName</code> and <code>@sKeyName</code> parameters if you so wish.</p>
</li>
<li>
<p>You can change the location that the certificate and key are backed up to by changing the value of the <code>@sBackupLocation</code> parameter.</p>
<p>The location must already exist, and there must not be any files within the specified location with the same name as the certificate or master key names that have been specified.</p>
<p>The user that this script will be executed as must also have write permissions to this location.</p>
</li>
<li>
<p>Once the parameters have been set appropriately you should now save the script.</p>
<p>We recommended that the modified script is saved out to file (taking care to observe your own organisation&rsquo;s security policies for password management), before it is executed. This may help facilitate the support process if anything goes wrong.</p>
</li>
<li>
<p>Click <code>Execute</code> to run the script. It may take several minutes to execute depending on the size of the databases.</p>
</li>
<li>
<p>Once the script has completed successfully, you should move the backed-up certificate and master key to a secure location and the password specified should also be stored securely.</p>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-473627ed5fdaf469986dd76997848b94">4 - Create Self-Signed Certificates</h1>
    <div class="lead">Information about creating and installing self-signed certificates.</div>
	<h1 id="create-self-signed-certificates">Create Self-Signed Certificates</h1>
<p>Self-signed certificates should be generated using OpenSSL which is bundled in the Cortex Web App Server Install Scripts:</p>
<h2 id="setup-openssl-in-powershell">Setup OpenSSL in PowerShell</h2>
<ol>
<li>
<p>Open a Windows PowerShell (x64) window as administrator.</p>
</li>
<li>
<p>Make a directory in which to store the certificates by running the following command, changing the path as required:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">mkdir</span> <span style="color:#000">C:</span><span style="color:#000;font-weight:bold">\</span><span style="color:#000">Certificates</span>
</code></pre></div></li>
<li>
<p>Navigate PowerShell to inside the certificates folder created above, using the following command, modifying the path as necessary:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#204a87">cd </span><span style="color:#4e9a06">&#34;C:\Certificates&#34;</span>
</code></pre></div></li>
<li>
<p>Temporarily add OpenSSL to the Path environment variable of your system by running the following command, modifying the path according to the location of <code>openssl.exe</code> in the installation scripts on the machine:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">$env:PATH</span> <span style="color:#000;font-weight:bold">+=</span> <span style="color:#4e9a06">&#34;;C:\Cortex Innovation 2022.9 - Web App Server Install Scripts\OpenSSL&#34;</span>
</code></pre></div></li>
</ol>
<h2 id="generate-the-root-ca-certificate">Generate the Root CA Certificate</h2>
<ol>
<li>
<p>Create the Root CA private key by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">genrsa</span> <span style="color:#000">-out</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">4096</span>
</code></pre></div></li>
<li>
<p>Generate the Root CA certificate signed with the private key:</p>
<ol>
<li>
<p>Copy the following text into a text editor:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#000">RANDFILE</span>		<span style="color:#ce5c00;font-weight:bold">=</span> .rnd
<span style="color:#ce5c00;font-weight:bold">[</span> ca <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">default_ca</span>	<span style="color:#ce5c00;font-weight:bold">=</span> CA_default	<span style="color:#8f5902;font-style:italic"># The default ca section</span>
<span style="color:#ce5c00;font-weight:bold">[</span> CA_default <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># Directory and file locations.</span>
<span style="color:#8f5902;font-style:italic"># SHA-1 is deprecated, so use SHA-2 instead.</span>
<span style="color:#000">default_md</span>        <span style="color:#ce5c00;font-weight:bold">=</span> sha256
<span style="color:#000">policy</span>            <span style="color:#ce5c00;font-weight:bold">=</span> policy_strict
<span style="color:#ce5c00;font-weight:bold">[</span> policy_strict <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># The root CA should only sign intermediate certificates that match.</span>
<span style="color:#8f5902;font-style:italic"># See the POLICY FORMAT section of `man ca`.</span>
<span style="color:#000">countryName</span>             <span style="color:#ce5c00;font-weight:bold">=</span> match
<span style="color:#000">stateOrProvinceName</span>     <span style="color:#ce5c00;font-weight:bold">=</span> match
<span style="color:#000">organizationName</span>        <span style="color:#ce5c00;font-weight:bold">=</span> match
<span style="color:#000">organizationalUnitName</span>  <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#000">commonName</span>              <span style="color:#ce5c00;font-weight:bold">=</span> supplied
<span style="color:#000">emailAddress</span>            <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#ce5c00;font-weight:bold">[</span> req <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># Options for the `req` tool (`man req`).</span>
<span style="color:#000">default_bits</span>        <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2048</span>
<span style="color:#000">distinguished_name</span>  <span style="color:#ce5c00;font-weight:bold">=</span> req_distinguished_name
<span style="color:#000">string_mask</span>         <span style="color:#ce5c00;font-weight:bold">=</span> utf8only

<span style="color:#8f5902;font-style:italic"># SHA-1 is deprecated, so use SHA-2 instead.</span>
<span style="color:#000">default_md</span>          <span style="color:#ce5c00;font-weight:bold">=</span> sha256
<span style="color:#8f5902;font-style:italic"># Extension to add when the -x509 option is used.</span>
<span style="color:#000">x509_extensions</span>     <span style="color:#ce5c00;font-weight:bold">=</span> v3_ca
<span style="color:#ce5c00;font-weight:bold">[</span> req_distinguished_name <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">countryName</span>				<span style="color:#ce5c00;font-weight:bold">=</span> Country Name <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span> letter code<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">countryName_min</span>			<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
<span style="color:#000">countryName_max</span>			<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
<span style="color:#000">stateOrProvinceName</span>		<span style="color:#ce5c00;font-weight:bold">=</span> State or Province Name <span style="color:#ce5c00;font-weight:bold">(</span>full name<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">localityName</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Locality Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, city<span style="color:#ce5c00;font-weight:bold">)</span>
0.organizationName		<span style="color:#ce5c00;font-weight:bold">=</span> Organization Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, company<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">organizationalUnitName</span>	<span style="color:#ce5c00;font-weight:bold">=</span> Organizational Unit Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, section<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">commonName</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Common Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, your website<span style="color:#a40000">&#39;</span>s domain name<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">commonName_max</span>			<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">64</span>
<span style="color:#000">emailAddress</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Email Address
<span style="color:#000">emailAddress_max</span>		<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">40</span>
<span style="color:#8f5902;font-style:italic"># Optionally, specify some defaults.</span>
<span style="color:#000">countryName_default</span>             <span style="color:#ce5c00;font-weight:bold">=</span> GB
<span style="color:#000">stateOrProvinceName_default</span>     <span style="color:#ce5c00;font-weight:bold">=</span> Hampshire
<span style="color:#000">localityName_default</span>            <span style="color:#ce5c00;font-weight:bold">=</span> Southampton
0.organizationName_default      <span style="color:#ce5c00;font-weight:bold">=</span> Cortex Ltd
<span style="color:#000">organizationalUnitName_default</span>	<span style="color:#ce5c00;font-weight:bold">=</span> Cortex 
<span style="color:#000">emailAddress_default</span>			<span style="color:#ce5c00;font-weight:bold">=</span> info@cortex.co.uk
<span style="color:#ce5c00;font-weight:bold">[</span> v3_ca <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># Extensions for a typical CA (`man x509v3_config`).</span>
<span style="color:#000">subjectKeyIdentifier</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#204a87">hash</span>
<span style="color:#000">authorityKeyIdentifier</span> <span style="color:#ce5c00;font-weight:bold">=</span> keyid:always,issuer
<span style="color:#000">basicConstraints</span> <span style="color:#ce5c00;font-weight:bold">=</span> critical, CA:true
<span style="color:#000">keyUsage</span> <span style="color:#ce5c00;font-weight:bold">=</span> critical, digitalSignature, cRLSign, keyCertSign
</code></pre></div></li>
<li>
<p>Save the file as <code>ca.cnf</code> in the directory created for the certificates above.</p>
</li>
<li>
<p>In the PowerShell window, run the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">req</span> <span style="color:#000">-sha256</span> <span style="color:#000">-x509</span> <span style="color:#000">-new</span> <span style="color:#000">-nodes</span> <span style="color:#000">-key</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">-days</span> <span style="color:#000">3650</span> <span style="color:#000">-out</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pem</span> <span style="color:#000">-config</span> <span style="color:#000">ca</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">cnf</span>
</code></pre></div></li>
<li>
<p>Press <code>Enter</code> for all parameters except the Common Name. For this enter <code>Cortex CA</code>.</p>
</li>
</ol>
</li>
<li>
<p>Package your public and private key in a pkcs12 encrypted file (to install with certmgr on windows) by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">pkcs12</span> <span style="color:#000">-export</span> <span style="color:#000">-inkey</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">-in</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pem</span> <span style="color:#000">-out</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pfx</span>
</code></pre></div></li>
<li>
<p>Enter a memorable string as the Export Password when asked, this will be needed when adding the certificate to certmgr.</p>
</li>
<li>
<p>Double click on the <code>cortexCA.pfx</code> file in the certificates folder to import the certificate into the Windows Certificate Store. Perform the following steps:</p>
<ol>
<li>Select <code>Local Machine</code> then click <code>Next</code>.</li>
<li>Click <code>Next</code>.</li>
<li>Enter the Export Password which the certificate was generated with then click <code>Next</code>.</li>
<li>Select <code>Place all certificates in the following store</code>.</li>
<li>Click <code>Browse…</code>.</li>
<li>Select <code>Trusted Root Certification Authorities</code>, click <code>OK</code> then click <code>Next</code>.</li>
<li>Click <code>Finish</code>.</li>
</ol>
</li>
</ol>
<h2 id="generate-the-certificate">Generate the Certificate</h2>
<ol>
<li>
<p>Create a private key for the SSL cert by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">genrsa</span> <span style="color:#000">-out</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">2048</span>
</code></pre></div></li>
<li>
<p>Generate the SSL certificate request:</p>
<ol>
<li>
<p>Copy the following text into a text editor:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#000">RANDFILE</span>		<span style="color:#ce5c00;font-weight:bold">=</span> .rnd
<span style="color:#ce5c00;font-weight:bold">[</span> ca <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">default_ca</span>	<span style="color:#ce5c00;font-weight:bold">=</span> CA_default	<span style="color:#8f5902;font-style:italic"># The default ca section</span>
<span style="color:#ce5c00;font-weight:bold">[</span> CA_default <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># SHA-1 is deprecated, so use SHA-2 instead.</span>
<span style="color:#000">default_md</span>        <span style="color:#ce5c00;font-weight:bold">=</span> sha256
<span style="color:#000">policy</span>            <span style="color:#ce5c00;font-weight:bold">=</span> policy_loose
<span style="color:#ce5c00;font-weight:bold">[</span> policy_loose <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># Allow the intermediate CA to sign a more diverse range of certificates.</span>
<span style="color:#8f5902;font-style:italic"># See the POLICY FORMAT section of the `ca` man page.</span>
<span style="color:#000">countryName</span>             <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#000">stateOrProvinceName</span>     <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#000">localityName</span>            <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#000">organizationName</span>        <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#000">organizationalUnitName</span>  <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#000">commonName</span>              <span style="color:#ce5c00;font-weight:bold">=</span> supplied
<span style="color:#000">emailAddress</span>            <span style="color:#ce5c00;font-weight:bold">=</span> optional
<span style="color:#ce5c00;font-weight:bold">[</span> req <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># Options for the `req` tool (`man req`).</span>
<span style="color:#000">default_bits</span>        <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2048</span>
<span style="color:#000">distinguished_name</span>  <span style="color:#ce5c00;font-weight:bold">=</span> req_distinguished_name
<span style="color:#000">string_mask</span>         <span style="color:#ce5c00;font-weight:bold">=</span> utf8only
<span style="color:#8f5902;font-style:italic"># SHA-1 is deprecated, so use SHA-2 instead.</span>
<span style="color:#000">default_md</span>          <span style="color:#ce5c00;font-weight:bold">=</span> sha256
<span style="color:#8f5902;font-style:italic"># Extension to add when the -x509 option is used.</span>
<span style="color:#000">x509_extensions</span>     <span style="color:#ce5c00;font-weight:bold">=</span> v3_req
<span style="color:#000">req_extensions</span>      <span style="color:#ce5c00;font-weight:bold">=</span> v3_req
<span style="color:#ce5c00;font-weight:bold">[</span> req_distinguished_name <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">countryName</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Country Name <span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#0000cf;font-weight:bold">2</span> letter code<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">countryName_min</span>			<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
<span style="color:#000">countryName_max</span>			<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">2</span>
<span style="color:#000">stateOrProvinceName</span>		<span style="color:#ce5c00;font-weight:bold">=</span> State or Province Name <span style="color:#ce5c00;font-weight:bold">(</span>full name<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">localityName</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Locality Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, city<span style="color:#ce5c00;font-weight:bold">)</span>
0.organizationName		<span style="color:#ce5c00;font-weight:bold">=</span> Organization Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, company<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">organizationalUnitName</span>	<span style="color:#ce5c00;font-weight:bold">=</span> Organizational Unit Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, section<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">commonName</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Common Name <span style="color:#ce5c00;font-weight:bold">(</span>eg, your website<span style="color:#a40000">&#39;</span>s domain name<span style="color:#ce5c00;font-weight:bold">)</span>
<span style="color:#000">commonName_max</span>			<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">64</span>
<span style="color:#000">emailAddress</span>			<span style="color:#ce5c00;font-weight:bold">=</span> Email Address
<span style="color:#000">emailAddress_max</span>		<span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#0000cf;font-weight:bold">40</span>
<span style="color:#8f5902;font-style:italic"># Optionally, specify some defaults.</span>
<span style="color:#000">countryName_default</span>             <span style="color:#ce5c00;font-weight:bold">=</span> GB
<span style="color:#000">stateOrProvinceName_default</span>     <span style="color:#ce5c00;font-weight:bold">=</span> Hampshire
<span style="color:#000">localityName_default</span>            <span style="color:#ce5c00;font-weight:bold">=</span> Southampton
0.organizationName_default      <span style="color:#ce5c00;font-weight:bold">=</span> Cortex Ltd
<span style="color:#000">organizationalUnitName_default</span>  <span style="color:#ce5c00;font-weight:bold">=</span> Cortex 
<span style="color:#000">emailAddress_default</span>	       <span style="color:#ce5c00;font-weight:bold">=</span> info@cortex.co.uk
<span style="color:#ce5c00;font-weight:bold">[</span> v3_req <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#000">basicConstraints</span> <span style="color:#ce5c00;font-weight:bold">=</span> CA:FALSE
<span style="color:#000">keyUsage</span> <span style="color:#ce5c00;font-weight:bold">=</span> nonRepudiation, digitalSignature, keyEncipherment
<span style="color:#000">subjectAltName</span> <span style="color:#ce5c00;font-weight:bold">=</span> @alt_names
<span style="color:#ce5c00;font-weight:bold">[</span> alt_names <span style="color:#ce5c00;font-weight:bold">]</span>
<span style="color:#8f5902;font-style:italic"># Specify all DNS and/or IP addresses that clients can use to access the secured resource.</span>
DNS.1 <span style="color:#ce5c00;font-weight:bold">=</span> MACHINE-NAME 
DNS.2 <span style="color:#ce5c00;font-weight:bold">=</span> FULLY QUALIFIED MACHINE NAME
DNS.3 <span style="color:#ce5c00;font-weight:bold">=</span> localhost 
IP.1 <span style="color:#ce5c00;font-weight:bold">=</span> IP ADDRESS
IP.2 <span style="color:#ce5c00;font-weight:bold">=</span> 127.0.0.1 
</code></pre></div></li>
<li>
<p>Modify the section <code>[alt_names]</code> to include all the required DNS names and IP addresses that clients can use to access the secured resource.
Each DNS name or IP address entry must be suffixed with <code>.N</code> where <code>N</code> is the unique index of the DNS name or IP address entry; see below for examples:</p>
<table>
<thead>
<tr>
<th>Resource URL</th>
<th>Configuration to add</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>https://cortex.co.uk/gateway</code></td>
<td><code>DNS.1 = cortex.co.uk</code></td>
</tr>
<tr>
<td><code>https://internal.cortex.co.uk/gateway</code></td>
<td><code>DNS.2 = internal.cortex.co.uk</code></td>
</tr>
<tr>
<td><code>https://10.0.0.0/gateway</code></td>
<td><code>IP.1 = 10.0.0.0</code></td>
</tr>
<tr>
<td><code>https://192.168.1.100/gateway</code></td>
<td><code>IP.2 = 192.168.1.100</code></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Save the file as <code>san.cnf</code> in the directory created for the certificates above.</p>
</li>
<li>
<p>In the PowerShell window, run the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">req</span> <span style="color:#000">-new</span> <span style="color:#000">-sha256</span> <span style="color:#000">-key</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">-out</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">req</span> <span style="color:#000">-extensions</span> <span style="color:#000">v3_req</span> <span style="color:#000">-config</span> <span style="color:#000">san</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">cnf</span>
</code></pre></div></li>
<li>
<p>Press <code>Enter</code> for everything except the Common Name. For this enter <code>Cortex</code>.</p>
</li>
<li>
<p>Sign the request with a previously generated Root CA by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">x509</span> <span style="color:#000">-req</span> <span style="color:#000">-sha256</span> <span style="color:#000">-in</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">req</span> <span style="color:#000">-CA</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pem</span> <span style="color:#000">-CAkey</span> <span style="color:#000">cortexCA</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">-CAcreateserial</span> <span style="color:#000">-out</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pem</span> <span style="color:#000">-days</span> <span style="color:#000">3650</span> <span style="color:#000">-extensions</span> <span style="color:#000">v3_req</span> <span style="color:#000">-extfile</span> <span style="color:#000">san</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">cnf</span>
</code></pre></div></li>
<li>
<p>Package your public and private key in a pkcs12 encrypted file (to install with certmgr on windows) by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000">openssl</span> <span style="color:#000">pkcs12</span> <span style="color:#000">-export</span> <span style="color:#000">-inkey</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">key</span> <span style="color:#000">-in</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pem</span> <span style="color:#000">-out</span> <span style="color:#000">cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">pfx</span>
</code></pre></div></li>
<li>
<p>Enter a memorable string as the Export Password when asked, this will be needed when adding the certificate to certmgr.</p>
</li>
</ol>
</li>
</ol>
<h2 id="import-the-certificate">Import the Certificate</h2>
<ol>
<li>Double click on the <code>cortex.pfx</code> file in the certificates folder to get the certificate imported to the Windows Certificate Store. Perform the following steps:
<ol>
<li>Select <code>Local Machine</code> then click <code>Next</code>.</li>
<li>Click <code>Next</code>.</li>
<li>Enter the Export Password which the certificate was generated with then click <code>Next</code>.</li>
<li>Select <code>Place all certificates in the following store</code>.</li>
<li>Click <code>Browse…</code>.</li>
<li>Select <code>Personal</code>, click <code>OK</code> then click <code>Next</code>.</li>
<li>Click <code>Finish</code>.</li>
</ol>
</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-ee76c0361d921fa7f68149bce1441127">5 - Encrypt Text</h1>
    <div class="lead">Information about encrypting text using the Cortex Encryptor.</div>
	<h1 id="encrypt-text">Encrypt Text</h1>
<p>To encrypt text using the Cortex Encryptor PowerShell module:</p>
<ol>
<li>
<p>Extract the <code>Cortex Innovation 2022.9 - Encryptor.zip</code> file to a folder with the same name.</p>
</li>
<li>
<p>Open a Windows PowerShell (x64) window as administrator.</p>
</li>
<li>
<p>Navigate PowerShell to inside the <code>Cortex Innovation 2022.9 - Encryptor</code> folder using the following command, modifying the path as necessary:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#204a87">cd </span><span style="color:#4e9a06">&#34;C:\Install\Cortex Innovation 2022.9 - Encryptor&#34;</span>
</code></pre></div></li>
<li>
<p>In the Windows PowerShell (x64) window, run the following command to import the module:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#204a87">Import-Module</span> <span style="color:#000;font-weight:bold">.\</span><span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Encryptor</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">psd1</span>
</code></pre></div></li>
<li>
<p>In the Windows PowerShell (x64) window, run the following command to encrypt text, replacing <code>text to encrypt</code> with the text that you want to encrypt:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#204a87">ConvertTo-EncryptedText</span> <span style="color:#000">-Text</span> <span style="color:#4e9a06">&#34;text to encrypt&#34;</span>
</code></pre></div><p>The command will return the encrypted text, beginning with <code>#_</code>. This step can be repeated for any texts that need to be encrypted.</p>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note:</h4>

    The <code>Import-Module</code> command will need to be repeated every time a new PowerShell window is used. To install the PowerShell module so that it is always available, follow the instructions laid out <a href="https://docs.microsoft.com/en-us/powershell/scripting/developer/module/installing-a-powershell-module?view=powershell-7.2">here</a>.

</div>

</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5e3a44a25a94bb5b847acae8a02fc8bb">6 - Port Requirements for Application Servers and Load Balancer</h1>
    <div class="lead">Information about the ports opened when installing Cortex Innovation.</div>
	<h1 id="port-requirements-for-application-servers-and-load-balancer">Port Requirements for Application Servers and Load Balancer</h1>
<p>Cortex Innovation and Microsoft Service Fabric open a range of firewall ports between the servers and specific services. Some of them are opened during installation, others are opened dynamically as needed. These are opened on Windows Firewall. If any other firewall exists between the servers, it will be necessary to configure this selection of rules on it. Most ports may be altered if another program overlaps with them, the description will say if this is not possible.</p>
<h2 id="cortex-innovation-ports">Cortex Innovation Ports</h2>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
<th>Default Port(s)</th>
<th>Protocol</th>
<th>Direction</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cortex.RabbitMqAmqpPorts</td>
<td>The port used by AMQP 0-9-1 and 1.0 clients with TLS. <strong>This cannot currently be changed.</strong></td>
<td>5671</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.RabbitMqEpmdPorts</td>
<td>The port used by epmd, a peer discovery service used by RabbitMQ nodes and CLI tools. <strong>This cannot currently be changed.</strong></td>
<td>4369</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.RabbitMqErlangDistribut ionClientPorts</td>
<td>The ports used by CLI tools (Erlang distribution client ports) for communication with nodes and is allocated from a dynamic range (computed as Erlang dist port + 10000 through dist port + 10010). <strong>This cannot currently be changed.</strong></td>
<td>35672-35682</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.RabbitMqErlangDistribut ionServerPort</td>
<td>The port used for RabbitMQ inter-node and CLI tools communication (Erlang distribution server port) and is allocated from a dynamic range (limited to a single port by default, computed as AMQP port + 20000). <strong>This cannot currently be changed.</strong></td>
<td>25672</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.RabbitMqManagement ApiPort</td>
<td>The port used by the RabbitMQ management plugin. <strong>This cannot currently be changed.</strong></td>
<td>15671</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.WindowsSmbRemote Registry</td>
<td>The ports used by Windows SMB and Remote Registry service.</td>
<td>135, 137, 138, 139, 445</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.ServiceFabric.Customer1. ClusterConnectionEndpointPort</td>
<td>The port used by the client to connect to the cluster when client APIs are used.</td>
<td>8001</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.ServiceFabric.Customer1. ClientConnectionEndpointPort</td>
<td>The port where the nodes communicate with each other.</td>
<td>8002</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
<tr>
<td>Cortex.ServiceFabric.Customer1. ServiceConnectionEndpointPort</td>
<td>The port used by the applications and services deployed on a node to communicate with the Service Fabric client on that particular node.</td>
<td>8004</td>
<td>TCP</td>
<td>Inbound</td>
</tr>
</tbody>
</table>
<h2 id="microsoft-service-fabric-firewall-rules-present-on-all-application-servers-with-domain-public-and-private-profiles">Microsoft Service Fabric Firewall Rules (present on all Application Servers, with Domain, Public and Private Profiles)</h2>
<p>These rules will all appear in Windows Firewall with names starting with ‘{CustomerName}.{NodeName} WindowsFabric’.</p>
<table>
<thead>
<tr>
<th>Name in Rule</th>
<th>Name in Config</th>
<th>Description</th>
<th>Default Port(s)</th>
<th>Protocol(s)</th>
<th>Direction</th>
</tr>
</thead>
<tbody>
<tr>
<td>Application Processes</td>
<td>application Ports</td>
<td>The ports that are used by the Service Fabric applications. Service Fabric uses these ports whenever new dynamic ports are required. <strong>The application port range should be large enough to cater for the dynamic port allocation of the application. Currently at least 400 is recommended. This may change if new services are added. This range should not overlap the Dynamic Ports (ephemeralPorts) range as set in the configuration.</strong> <br /><br /> <strong>Program</strong>: Any</td>
<td>10010-10500</td>
<td>TCP, UDP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>BackupRestore Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric process which manages the backup and restore of Application Services. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_<AppID>\BRS.Code.Current\FabricBRS.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>CentralSecret Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric process which manages secrets. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_<AppID>\BRS.Code.Current\FabricCSS.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>DCA Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Diagnostics Collection Agent, which manages Diagnostic data. <br /> <br /> <strong>Program:</strong> %ProgramFiles%\Microsoft Service Fabric\bin\ Fabric\DCA.Code\FabricDCA.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Outbound</td>
</tr>
<tr>
<td>Dynamic Ports</td>
<td>ephemeral Ports</td>
<td>Override the <strong><a href="https://support.microsoft.com/kb/929851">dynamic ports used by the OS</a></strong>. Service Fabric uses a part of these ports as application ports, and the remaining are available for the OS. It also maps this range to the existing range present in the OS, so for all purposes, you can use the ranges given in the sample JSON files. <strong>Make sure that the difference between the start and the end ports is at least 255</strong>. You might run into conflicts if this difference is too low, because this range is shared with the OS. To see the configured dynamic port range, run netsh int ipv4 show dynamicport tcp. <br /> <br /> <strong>Program:</strong> Any</td>
<td>10501-20000</td>
<td>TCP, UDP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>EventStore Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric EventStore, which maintains events about the state of the Application Services. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\ES.Code.Current\ EventStore.Service.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>Fabric Gateway Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Gateway, which allows REST and management functions to access the Application Services. <br /> <br /> <strong>Program:</strong> %ProgramFiles%\Microsoft Service Fabric\bin\Fabric\ Fabric.Code\FabricGateway.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>Fabric Process</td>
<td>N/A</td>
<td>The port used by the main Service Fabric service. <br /> <br /> <strong>Program:</strong> %ProgramFiles%\Microsoft Service Fabric\bin\Fabric\ Fabric.Code\Fabric.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>FabricUpgrade Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Upgrade service. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\US.Code.Current\FabricUS.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>FaultAnalysis Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Fault Analysis service. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\FAS.Code.Current\FabricFAS.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>FileStore Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric File Store service, which manages the application file store and image store. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\FileStoreService.Code.Current\ FileStoreService.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>GatewayResource Manager Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Gateway Resource Manager, which provides APIs to manage the Application Services and other resources. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\GRM.Code.Current\FabricGRM.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>HTTP App Gateway</td>
<td>reverse Proxy Endpoint Port</td>
<td><strong>This port cannot be changed at the current time. If it is already in use, please contact Cortex for assistance.</strong> The reverse proxy endpoint. For more information, see <strong><a href="https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-reverseproxy">Service Fabric reverse proxy</a></strong>. <br /> <br /> <strong>Program:</strong> Any</td>
<td>9081</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>Http Gateway</td>
<td>http Gateway Endpoint Port</td>
<td>The port used by Service Fabric Explorer to connect to the cluster. <strong>This changes the port used to connect to the Service Fabric management portal as part of the post-install checks.</strong> <br /> <br /> <strong>Program:</strong> Any</td>
<td>9080</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>Infrastructure Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Infrastructure Service. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\IS.Code.Current\FabricIS.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>Lease Driver</td>
<td>lease Driver Endpoint Port</td>
<td>The port used by the cluster lease driver to find out if the nodes are still active. <br /> <br /> <strong>Program:</strong> Any</td>
<td>9002</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>ManagedIdentity TokenService Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Managed Identity Token Service. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\MITS.Code.Current\ ManagedIdentityTokenService.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>RepairManager Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Repair Manager Service. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\RM.Code.Current\FabricRM.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
<tr>
<td>Upgrade Orchestration Service Process</td>
<td>N/A</td>
<td>The port used by the Service Fabric Upgrade Orchestration service. <br /> <br /> <strong>Program:</strong> %ProgramData%\SF\<CustomerName>.<Node Name>\Fabric\work\Applications\ __FabricSystem_App*\UOS.Code.Current\FabricUOS.exe</td>
<td>Any</td>
<td>TCP</td>
<td>Inbound, Outbound</td>
</tr>
</tbody>
</table>
<h2 id="cortex-application-service-rules">Cortex Application Service Rules</h2>
<p>Each service has an endpoint which is used to communicate with Service Fabric and the RabbitMQ message broker. These are configured in the ServiceManifest.xml file within each package in the ApplicationPackages\Cortex directory of the installation media. These ports cannot be used by any other program. If they do clash with another program, they may be changed but additional configuration changes may be necessary, as described in the description of each port. The Application ports must not lie in the ephemeralPorts range.</p>
<table>
<thead>
<tr>
<th>Name of Service</th>
<th>Description</th>
<th>Default Port(s)</th>
<th>Protocol(s)</th>
<th>Direction</th>
<th>Program</th>
</tr>
</thead>
<tbody>
<tr>
<td>API Gateway</td>
<td>The port providing an entry into the API Gateway service. This is used by Cortex Gateway to communicate with the Application Services. <strong>If this is changed then it will be necessary to use the updated value in the</strong> <strong>&quot;<strong><strong>Service Fabric Api Gateway Endpoint</strong></strong>&quot; parameter of SetParameters.xml when configuring Cortex Gateway later in this document.</strong></td>
<td>8722</td>
<td>TCP, UDP</td>
<td>Inbound, Outbound</td>
<td>Any</td>
</tr>
<tr>
<td>Flow Execution</td>
<td>The ports providing communication between other services and the stateful Cortex Flow Execution service. These are dynamic ports managed by Service Fabric.</td>
<td>Dynamic – Uses the application ports</td>
<td>N/A</td>
<td>N/A</td>
<td>N/A</td>
</tr>
</tbody>
</table>
<h2 id="cortex-load-balancer-rules">Cortex Load Balancer Rules</h2>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Note</h4>

    Only applicable for installations with HA.

</div>

<p>The load balancer server must be able to retrieve traffic via HTTPS. The following firewall ports are opened by the installer (these rules will all appear in Windows Firewall with names starting with <code>{CustomerName}</code>):</p>
<table>
<thead>
<tr>
<th>Name in Rule</th>
<th>Name in Config</th>
<th>Default Port(s)</th>
<th>Protocol(s)</th>
<th>Direction</th>
<th>Program</th>
</tr>
</thead>
<tbody>
<tr>
<td>GoBetweenTlsPort</td>
<td>loadBalancerTlsPort</td>
<td>443</td>
<td>TCP</td>
<td>Inbound</td>
<td>Any</td>
</tr>
</tbody>
</table>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2154296292afc725b4661ad2c7ef9ec7">7 - Rollover CA certificates</h1>
    <div class="lead">Information about updating the certificates on a single or multi-server Cortex platform which uses CA certificates.</div>
	<h1 id="rollover-ca-certificates">Rollover CA certificates</h1>


<div class="pageinfo pageinfo-primary">
<p>This process MUST be undertaken before certificates expire, otherwise your system will become unusable. If certificates have already expired, contact <a href="https://support.cortex.co.uk/">Cortex Service Portal</a> at the earliest opportunity.</p>
<p>Only platforms which use CA certificates can have their certificates updated using this mechanism. Systems using self-signed certificates must be reinstalled.</p>
<p>This mechanism cannot be used to switch from self-signed to CA certificates; that requires a reinstall.</p>

</div>



<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Warning</h4>

    Updating the certificates on a single-server system with no high availability will result in downtime while the upgrade takes place. Ensure that this is undertaken at a suitable time. Systems with high availability will use a rollover mechanism which should not result in any downtime.

</div>

<h2 id="application-server">Application Server</h2>
<h3 id="prerequisites">Prerequisites</h3>
<h4 id="certificate-requirements">Certificate Requirements</h4>
<p>A new, valid X.509 certificate needs to be obtained to update the certificates.</p>
<p>The certificate can be obtained from a Certificate Authority, such as <a href="https://letsencrypt.org/">Let’s Encrypt</a>, and must meet the following requirements:</p>
<ul>
<li>Subject field must be in a wildcard format, pertaining to the domain of the Application Servers (e.g. <code>CN=*.domain.com</code>).</li>
<li>Subject alternative names must include any additional host names that should be able to be used to access the API Gateway Service.</li>
<li>Certificate file must be in a .PFX file format, with a known password.</li>
<li>Certificate file must contain the full chain of certificates.</li>
<li>Certificate file must include the private key.</li>
<li>Key Usage extension must have a value of <code>Digital Signature, Key Encipherment (a0)</code>.</li>
<li>Enhanced Key Usage must include <code>Server Authentication</code> and <code>Client Authentication</code>.</li>
</ul>
<p>This file should be placed in a known location on the Application Server where the certificate update script will be run. This location will be required when running the update script.</p>
<p>If required, a separate X.509 SSL certificate can be obtained to be used by the load balancer to communicate with the Application Services. It must meet all of the other requirements laid out above, except the subject field can also be the FQDN of the load balancer (e.g. <code>CN=machine-name.domain.com</code>).</p>
<h3 id="configure-update-certificates-script">Configure Update Certificates Script</h3>
<ol>
<li>
<p>In the <code>Cortex Innovation 2022.9 - App Server Install Scripts</code> folder, locate the <code>Cortex.Innovation.Update.Certificates.ps1</code> script and open it with a text editor.</p>
</li>
<li>
<p>Choose the tab below that matches the configuration for this installation, then update the script to match, changing the parameters according to the details given below:</p>

        














        














    <ul class="nav nav-tabs" id="tabs-3" role="tablist"><li class="nav-item">
      <a class="nav-link active"
        id="tabs-3-0-tab" data-toggle="tab" href="#tabs-3-0" role="tab"
        aria-controls="tabs-3-0" aria-selected="true">
        Multiple Servers with HA
      </a>
    </li><li class="nav-item">
      <a class="nav-link"
        id="tabs-3-1-tab" data-toggle="tab" href="#tabs-3-1" role="tab"
        aria-controls="tabs-3-1" aria-selected="false">
        Single Server without HA
      </a>
    </li></ul>


<div class="tab-content" id="tabs-3-content"><div class="tab-pane fade show active"
        id="tabs-3-0" role="tabpanel" aria-labelled-by="tabs-3-0-tab"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">
<span style="color:#000;font-weight:bold">.\</span><span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Innovation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Update</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Certificates</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ps1</span> <span style="color:#000">-ConfigFileName</span> <span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Innovation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Install</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">json</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-ServerCertificatePath</span> <span style="color:#4e9a06">&#34;C:\Install\Certificates\cert.pfx&#34;</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-ServerCertificatePwd</span> <span style="color:#4e9a06">&#34;myPassword&#34;</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-ClientCertificatePath</span> <span style="color:#4e9a06">&#34;C:\Install\Certificates\cert.pfx&#34;</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-ClientCertificatePwd</span> <span style="color:#4e9a06">&#34;myPassword&#34;</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-Credential</span> <span style="color:#000">$Credential</span>
        </code></pre></div></div>
  <div class="tab-pane fade"
        id="tabs-3-1" role="tabpanel" aria-labelled-by="tabs-3-1-tab"><div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell">
<span style="color:#000;font-weight:bold">.\</span><span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Innovation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Update</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Certificates</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ps1</span> <span style="color:#000">-ConfigFileName</span> <span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Innovation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Install</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Config</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">json</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-ServerCertificatePath</span> <span style="color:#4e9a06">&#34;C:\Install\Certificates\cert.pfx&#34;</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-ServerCertificatePwd</span> <span style="color:#4e9a06">&#34;myPassword&#34;</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-SkipLoadBalancer</span> <span style="color:#000;font-weight:bold">`</span>
    <span style="color:#000">-Credential</span> <span style="color:#000">$Credential</span>
        </code></pre></div></div>
  
</div>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ServerCertificatePath</code></td>
<td>The local path of a new, valid .PFX certificate file on the server. Environment variables cannot be used. <br /><br />The certificate should meet the <a href="/docs/getting-started/on-premise/install-innovation-only/single-server-without-ha/prerequisites#certificate-requirements">Certificate Requirements</a>. <br /><br />This certificate will be used for: <ul><li>Securing communication between the Application Services.</li><li>Allowing Application Services to identify themselves to clients such as Gateway.</li><li>Preventing unauthorised nodes from joining the single node cluster.</li><li>Connecting to Service Fabric Explorer from each of the Application Servers.</li></ul></td>
</tr>
<tr>
<td><code>ServerCertificatePwd</code></td>
<td>The password for the .PFX certificate file specified in <code>ServerCertificatePath</code>.</td>
</tr>
<tr>
<td><code>ClientCertificatePath</code></td>
<td>The local path of a .PFX certificate file on the first Application Server in the <code>ApplicationServerIPv4Addresses</code> list. This can be the same certificate as the <code>ServerCertificatePath</code>. Environment variables cannot be used. <br /><br />This is only needed if installing with CA Certificates (Recommended) and using the Built-In Load Balancer. The certificate should meet the <a href="/docs/getting-started/on-premise/install-innovation-only/single-server-without-ha/prerequisites#certificate-requirements">Certificate Requirements</a>.<br /><br />This certificate will be used for: <ul><li>Securing communication between the load balancer and the nodes on the Application Servers.</li></ul></td>
</tr>
<tr>
<td><code>ClientCertificatePwd</code></td>
<td>The password for the .PFX certificate file specified in <code>ClientCertificatePath</code>. <br /><br /> This is only needed if using the Built-In Load Balancer.</td>
</tr>
<tr>
<td><code>SkipLoadBalancer</code></td>
<td>Updates certificates without updating a load balancer.</td>
</tr>
<tr>
<td><code>Credential</code></td>
<td>The credentials of the user which will be used to perform remote operations on the server. It must be a domain user that is a member of the local Administrators group on the server. <br /><br /> This does not need to be changed, a prompt will appear to enter this information when the script is run.</td>
</tr>
</tbody>
</table>
</li>
</ol>
<h3 id="test-update-certificates-script">Test Update Certificates Script</h3>
<ol>
<li>
<p>Open a Windows PowerShell (x64) window as administrator.</p>
</li>
<li>
<p>Navigate PowerShell to inside the <code>Cortex Innovation 2022.9 - App Server Install Scripts</code> folder using the following command, modifying the path as necessary:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#204a87">cd </span><span style="color:#4e9a06">&#34;C:\Install\Cortex Innovation 2022.9 - App Server Install Scripts&#34;</span>
</code></pre></div></li>
<li>
<p>Test <code>Cortex.Innovation.Update.Certificates.ps1</code> by running the following command:</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000;font-weight:bold">.\</span><span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Innovation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Update</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Certificates</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ps1</span> <span style="color:#000">-WhatIf</span>
</code></pre></div></li>
<li>
<p>A credentials prompt will appear. Enter credentials of a domain user that is a member of the local Administrators group on the server and press OK.</p>
</li>
<li>
<p>Wait for the command to finish. It will display the output of the certificate update command without making any changes to the system.</p>
</li>
<li>
<p>Check that there have been no errors in the script; these would appear in red in the console.</p>
<p>If there are no errors, continue to the next section; otherwise, check if the errors have any instructions for rectifying the issue and follow them.</p>
<p>If there are no useful instructions, check that all previous steps have been followed correctly and, if not, rectify it and run the command again. <br /><br />If this does not work, please contact <a href="https://support.cortex.co.uk/">Cortex Service Portal</a> for further assistance. The <code>WhatIf</code> script will have created a temporary version of the config file in the script location, showing what changes would be made to it when the script runs. The name is appended with <code>-WhatIf</code> (e.g. <code>Cortex.Innovation.Install.Config-WhatIf.json</code>). This file can be provided when obtaining support.</p>
</li>
</ol>
<h3 id="run-update-certificates-script">Run Update Certificates Script</h3>
<ol>
<li>
<p>Update the certificates for the Application Services and the required infrastructure by running the following command (<code>Tee-Object</code> will write output to both the PowerShell console and a log file, the <code>FilePath</code> value can be changed if required):</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-powershell" data-lang="powershell"><span style="color:#000;font-weight:bold">.\</span><span style="color:#000">Cortex</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Innovation</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Update</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">Certificates</span><span style="color:#000;font-weight:bold">.</span><span style="color:#000">ps1</span> <span style="color:#000;font-weight:bold">|</span> <span style="color:#204a87">Tee-Object</span> <span style="color:#000">-FilePath</span> <span style="color:#4e9a06">&#34;cortex-app-certificate-update-log.txt&#34;</span>
</code></pre></div></li>
<li>
<p>A credentials prompt will appear. Enter credentials of a domain user that is a member of the local Administrators group on the server and press OK.</p>
</li>
<li>
<p>Wait for the script to finish running. This should take approximately 10 minutes.</p>
</li>
<li>
<p>Check that there have been no errors in the script; these would appear in red in the console.</p>
<p>If there are any errors, then please follow any instructions given within them to rectify the situation.</p>
<p>If the errors do not give any instructions on how to rectify, see <a href="/docs/reference/troubleshooting/installation#ts-during-installation">Troubleshooting During Installation</a> for further information; if this does not help then please contact <a href="https://support.cortex.co.uk/">Cortex Service Portal</a> for assistance.</p>
</li>
</ol>
<h3 id="check-application-services">Check Application Services</h3>
<ol>
<li>
<p>Log on to the server.</p>
</li>
<li>
<p>Import the certificate, used in the <code>ServerCertificatePath</code> parameter of the <a href="#configure-update-certificates-script">Configure Update Certificates Script</a> section, to your <code>Current User</code> certificate store. This can be achieved by double clicking on the certificate .PFX file and following the wizard.</p>
</li>
<li>
<p>Open a web browser.</p>
</li>
<li>
<p>Navigate to <code>https://server.domain.com:9080/Explorer</code>, where <code>server.domain.com</code> is the fully qualified domain name of the server. Replace <code>9080</code> with new <code>httpGatewayEndpointPort</code> value if it was changed during configuration.</p>
<p>The screen should resemble that in the following figure:

<figure>
    <img src=" /images/Service%20Fabric%20Explorer%20-%20Single.png "/> <figcaption>
            <h4>Healthy Service Fabric Explorer Cluster</h4>
        </figcaption>
</figure>
</p>
<p>The status circles should be entirely green - this indicates that the node and all services and instances are healthy. Other status pages can be accessed by expanding items in the leftmost pane. Issues can be tracked down to the failing component by expanding items with warning triangles or error icons on.</p>
<p>If there is still a warning that the certificate is close to expiring, wait a few hours and refresh the page and it should go away. It can take some time for the certificate to rollover.</p>
</li>
</ol>
<h2 id="web-application-server">Web Application Server</h2>
<p>If the Web Applications also use an expiring certificate, it will also need to be updated:</p>
<h3 id="import-the-certificate">Import the Certificate</h3>
<p>If using a single server and using the same certificates for both the Application Services and Web Applications, a new certificate will already be installed. Otherwise, follow the following instructions to import the new certificate for use with the Web Applications:</p>
<ol>
<li>Put the new, valid certificate in <code>.pfx</code> format on the Web Application Server.</li>
<li>Double click on the certificate file to open the install certificate wizard.</li>
<li>Select <code>Local Machine</code> then click <code>Next</code>.</li>
<li>Click <code>Next</code>.</li>
<li>Enter the Export Password which the certificate was generated with then click <code>Next</code>.</li>
<li>Select <code>Place all certificates in the following store</code>.</li>
<li>Click <code>Browse…</code>.</li>
<li>Select <code>Personal</code>, click <code>OK</code> then click <code>Next</code>.</li>
<li>Click <code>Finish</code>.</li>
</ol>
<h3 id="apply-the-certificate">Apply the Certificate</h3>
<ol>
<li>Open Internet Information Services (IIS) Manager.</li>
<li>In the left-hand pane of Internet Information Service (IIS) Manager, expand the server node.</li>
<li>Right-click on the Site node (usually <code>Cortex</code>) which contains the Debugger and Gateway.</li>
<li>Click <code>Edit Bindings...</code></li>
<li>Click on the <code>https</code> binding and click <code>Edit...</code>.</li>
<li>Click the SSL Certificate <code>Select...</code> button and select the new certificate from the table. Click <code>OK</code> to close the dialog.</li>
<li>Click <code>OK</code> to close Edit Bindings dialog.</li>
<li>Click <code>Close</code> to close the Bindings dialog.</li>
<li>Open Gateway in a browser. Click the padlock icon next to the URL. The certificate displayed should be the updated one.</li>
</ol>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-0ae9cc41688a1f099f28b887538ab98d">8 - SSL Best Practices</h1>
    <div class="lead">Information about the recommended security settings for Innovation servers.</div>
	<h1 id="ssl-best-practices">SSL Best Practices</h1>
<p>A collection of registry settings can be applied during installation to guarantee your server is only using the recommended encryption algorithms and TLS protocols:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Name</th>
<th>Enabled</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ciphers</td>
<td>AES 128/128</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>AES 256/256</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>Triple DES 168</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>DES 56/56</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>NULL</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC2 128/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC2 40/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC2 56/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC4 128/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC4 40/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC4 56/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>RC4 64/128</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Hashes</td>
<td>MD5</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>SHA</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>SHA256</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>SHA384</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>SHA512</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>KeyExchangeAlgorithms</td>
<td>Diffie-Hellman</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>ECDH</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>PKCS</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Protocols</td>
<td>Multi-Protocol Unified Hello</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>PCT 1.0</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>SSL 2.0</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>SSL 3.0</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS 1.0</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS 1.1</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS 1.2</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>Cipher Suites</td>
<td>TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</td>
<td>✓</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA25</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_RSA_WITH_AES_256_GCM_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_RSA_WITH_AES_128_GCM_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_RSA_WITH_AES_256_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_RSA_WITH_AES_128_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_AES_256_GCM_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_AES_128_GCM_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_AES_256_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_AES_128_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_AES_256_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_AES_128_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_3DES_EDE_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_DSS_WITH_AES_256_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_DSS_WITH_AES_128_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_DSS_WITH_AES_256_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_DSS_WITH_AES_128_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_RC4_128_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_RC4_128_MD5</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_NULL_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_RSA_WITH_NULL_SHA</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_PSK_WITH_AES_256_GCM_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_PSK_WITH_AES_128_GCM_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_PSK_WITH_AES_256_CBC_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_PSK_WITH_AES_128_CBC_SHA256</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_PSK_WITH_NULL_SHA384</td>
<td>✕</td>
</tr>
<tr>
<td></td>
<td>TLS_PSK_WITH_NULL_SHA256</td>
<td>✕</td>
</tr>
</tbody>
</table>


<div class="alert alert-primary" role="alert">
<h4 class="alert-heading">Warning</h4>

    Disabling specific TLS versions or specific Cipher Suites can have impact on Cortex components themselves as well as their communication capabilities with third party systems and services, e.g. Flow Debugger Service executing flows with blocks which communicate with 3rd parties via PowerShell or REST. All parties communicating together must support a shared protocol version and cipher suite, otherwise they will not be able to establish a secure communication link between each other.

</div>


</div>



    
	
  



          </main>
        </div>
      </div>
      

<footer class="bg-dark row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-12 col-sm-12 text-center py-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://twitter.com/cortex_software">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Facebook" aria-label="Facebook">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.facebook.com/cortexintelligentautomation/">
      <i class="fab fa-facebook"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Vimeo" aria-label="Vimeo">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://vimeo.com/cortexautomationsoftware">
      <i class="fab fa-vimeo"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/company/10975051">
      <i class="fab fa-linkedin"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="YouTube" aria-label="YouTube">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/channel/UCZwlagVEozhAjmUySYx8YlA">
      <i class="fab fa-youtube"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
    </div>
    <div class="row">
      <div class="col-6 col-sm-6 text-xs-center order-sm-1">
        
        
        
<ul class="list-unstyled">
  
  <li data-toggle="tooltip" data-placement="top" aria-label="Privacy Policy">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.cortex-ia.com/gdpr-privacy-policy/">
      Privacy Policy
    </a>
  </li>
  
  <li data-toggle="tooltip" data-placement="top" aria-label="Terms and Conditions">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.cortex-ia.com/terms-conditions/">
      Terms and Conditions
    </a>
  </li>
  
  <li data-toggle="tooltip" data-placement="top" aria-label="Disclaimer">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.cortex-ia.com/disclaimer/">
      Disclaimer
    </a>
  </li>
  
  <li data-toggle="tooltip" data-placement="top" aria-label="Registration Number: 05023238">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://find-and-update.company-information.service.gov.uk/company/05023238">
      Registration Number: 05023238
    </a>
  </li>
  
  <li data-toggle="tooltip" data-placement="top" aria-label="VAT Number: GB204612157">
    <a class="text-white" target="_blank" rel="noopener noreferrer" href="https://www.tax.service.gov.uk/check-vat-number/enter-vat-details">
      VAT Number: GB204612157
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-6 text-right text-xs-center order-sm-2"> 
        <ul class="list-unstyled">
          
            
  <li class="text-white" data-toggle="tooltip" data-placement="top" aria-label="22 Kings Park Road">
      22 Kings Park Road
  </li>

            
  <li class="text-white" data-toggle="tooltip" data-placement="top" aria-label="Southampton, SO15 2AT">
      Southampton, SO15 2AT
  </li>

            
  <li class="text-white" data-toggle="tooltip" data-placement="top" aria-label="&#43;44 23 8254 8990">
      &#43;44 23 8254 8990
  </li>

            
  <li class="text-white" data-toggle="tooltip" data-placement="top" aria-label="info@cortex-ia.com">
      info@cortex-ia.com
  </li>

            
  <li class="text-white" data-toggle="tooltip" data-placement="top" aria-label="Southampton, SO15 2AT">
      Southampton, SO15 2AT
  </li>

          
        </ul>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-sm-12 text-center order-sm-1 copyright-container">
        Copyright &copy; 2022 Cortex Limited. All Rights Reserved
	
      </div>
    </div>
  </div>
</footer>






    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>













<script src="/js/main.min.906bd02f142be20eb94bb49539a18a3e93ec0b9ff5f5dcf3796eed436a6103d2.js" integrity="sha256-kGvQLxQr4g65S7SVOaGKPpPsC5/19dzzeW7tQ2phA9I=" crossorigin="anonymous"></script>




  </body>
</html>
