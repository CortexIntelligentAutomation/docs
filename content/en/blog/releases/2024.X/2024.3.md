---
title: "2024.3"
linkTitle: "2024.3"
date: 2024-04-08
author: Paul Arnold ([@paulmarnold](https://twitter.com/paulmarnold))
---

## Summary

The 2024.3 [Fast Track][] release is now available.

## Download Artefacts

Installation artefacts can be requested by raising a case in the [{{% ctx %}} Service Portal][].

## Release Notes

### Overview

2024.3 is the next [Fast Track][] release of {{% ctx %}} and continues our journey to improve on the previous 7.X generation in the following areas:

* Performance
* Capability
* Security
* Observability
* Documentation

This release shows [performance improvements][Platform Performance Improvements] in a number of areas:

* [Caching has been added to Provisioning service][Caching Added to the Provisioning Service] in order to reduce the number of messages sent throughout the HA Platform
* [HealthCheck enabled for the Triggers service after provisioning][HealthCheck Enabled for the Triggers Service after Provisioning]
* General [LoadBalancer healthcheck improvements][LoadBalancer HealthCheck Improvements]

Platform Visibility within the HA Platform has been improved in a number of ways:

* [A new Platform property has been updated to provide more information in logs][A New Platform Property has been Added to Provide more Information in Logs]
* [Request duration is now logged in seconds instead of milliseconds][Request Duration is now Logged in Seconds Instead of Milliseconds]
* [Type and Method properties have been added to all Platform logs][Type and Method Added to Platform Logs]
* [Custom Tags can be passed through logs via headers][Custom Tags can be Passed Through Logs via Headers] in order to add custom tags to any log related to the API request made
* [Exception Tags added to logs related to Exceptions or Problem Details][Exception Tags Added to Logs Related to Exceptions or Problem Details] which provides more information within a log when an issue occurs
* [Flow Logging Control][] has been added, this allows for logging to be turned on and off for all flows executing within the platform
* [Block Logging Control][] has been added, this allows for logging to be turned on and off for all blocks executing within the platform
* [Running executions can be viewed in real-time][Running Executions can be Viewed in Real-Time] which allows users to track executions within the platform
* [Grafana and Promtail updated to use the new and updated properties added to Platform logs][Grafana and Promtail Updated to use the New and Updated Properties Added to Platform Logs] to prevent issues with potentially breaking changes

Platform Security has been improved by [removing plaintext password from the GetLDAPConnection response message][Remove Plaintext Password from GetLDAPConnection Response Message]

Platform Upgrades have been added for both Single Server and Multi Server deployments, including new documentation being created for upgrading a 2024.1 {{% ctx %}} Platform to 2024.3. Other upgrade improvements include:

* [A new Flow Upgrader tool has been created to upgrade flows][A New Flow Upgrader Tool has been Created to Upgrade Flows] which allows for flows to be upgraded from 2024.1 to 2024.3 to mitigate potentially breaking changes
* [A new single server upgrade script has been added to the installation artefacts][A New Single Server Upgrade Script has been Added to the Installation Artefacts]
* [Upgrading a multi server platform now also upgrades Gobetween on the Load Balancer][]

[Block icons][Block Icon Redesign] within the {{% ctx %}} platform have been redesigned and overhauled. The refresh includes new icons for every block updating the consistency of design and accessability of colours used within flows.

The [ExecuteDataCommand][Improved Blocks] block have been improved as part of this release of the platform, adding a new Parameter type has been added for requests made to Oracle data sources. This new parameter allows for control of the OracleMappingType and ParameterDirection, which allows for processes like passing of larger data sets (CLOB) to an Oracle stored procedure.

The [installation process of the {{% ctx %}} Innovation Platform has been improved][improved installation] and has been updated further to remove references to hard coded drive paths, and now uses environment variables

Finally, this [Product Portal][] includes updated documentation for the [improved blocks][Improved Blocks] and related data types, improvements have been made to all [Exceptions][] and [Data Types][], and the documentation has been updated to reflect the [improved installation][] and new [platform upgrades][TODO] documentation.

### Components

| <nobr> Release Component </nobr>                                               | Version       | Updated                     | Update Type                 | Breaking Change | Notes                                                                                                                                      |
|--------------------------------------------------------------------------------|---------------|-----------------------------|-----------------------------|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| <nobr>[{{% ctx %}} Innovation Core Application][] </nobr>                      | 44.4.1.24210  | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} API Gateway Service][] </nobr>              | 34.3.2.24210  | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Authorisation Service][]                    | 4.0.5.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Concurrency Management Service][] </nobr>   | 3.0.5.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Configuration Management Service][] </nobr> | 3.2.2.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Data Storage Service][] </nobr>             | 4.0.6.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Execution Management Service][] </nobr>     | 4.0.7.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Licence Management Service][] </nobr>       | 4.0.5.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Package Management Service][] </nobr>       | 8.0.7.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Provisioning Service][] </nobr>             | 9.0.5.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Scheduling Service][] </nobr>               | 4.1.0.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Triggers Service][] </nobr>                 | 6.1.0.24210   | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>[{{% ctx %}} Innovation Execution Application][] </nobr>                 | 30.2.0.24210  | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>&nbsp; &nbsp; > [{{% ctx %}} Execution Service][] </nobr>                | 14.1.3.24210  | Yes                         | Major                       | Potential       | Major changes occurred between releases, these changes are [potentially breaking][Potentially Breaking - Blocks] between 2024.1 and 2024.3 |
| <nobr>[{{% ctx %}} Gateway][Gateway], including [{{% ctx %}} Studio][] </nobr> | 10.12.1.24210 | Yes                         | Minor                       | No              |                                                                                                                                            |
| <nobr>[{{% ctx %}} Blocks Package][Blocks] </nobr>                             | 43.7.2.24210  | Yes                         | Minor                       | No              |                                                                                                                                            |
| <nobr>[{{% ctx %}} Interaction Portal][Interaction Portal] </nobr>             | 1.0.1.24150   | Yes                         | Patch                       | No              |                                                                                                                                            |
| <nobr>{{% ctx %}} App Server Install Scripts </nobr>                           | 5.1.0.24140   | Yes                         | Minor                       | No              |                                                                                                                                            |
| <nobr>{{% ctx %}} Web App Server Install Scripts </nobr>                       | 7.1.0.24140   | Yes                         | Minor                       | No              |                                                                                                                                            |
| <nobr>{{% ctx %}} Licence Fingerprint Generator </nobr>                        | 3.0.0.23470   | No                          | N/A                         | N/A             |                                                                                                                                            |
| <nobr>{{% ctx %}} Encryption Key Generator </nobr>                             | 1.2.0.23470   | No                          | N/A                         | N/A             |                                                                                                                                            |
| <nobr>{{% ctx %}} Encryptor </nobr>                                            | 3.0.0.23460   | Yes                         | Major                       | No              |                                                                                                                                            |
| <nobr>{{% ctx %}} Flows Upgrader </nobr>                                       | 1.1.0.24210   | <nobr>First Release </nobr> | <nobr>First Release </nobr> | N/A             |                                                                                                                                            |

### Features

#### Platform Performance Improvements

##### Caching Added to the Provisioning Service

Caching has been added to [Provisioning Service][{{% ctx %}} Provisioning Service] in order to reduce the number of messages sent throughout the HA Platform and improve the performance of running flows.

The cache has been added with the following rules to limit memory growth within the Provisioning Service:

* Items are removed from the cache if they have not been accessed within one hour
* Items are removed from the cache on when the related package version is published or unpublished
* Items related to the "default" package of the system are removed from the cache when "default" package or version is changed or updated

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} Provisioning Service][]

##### HealthCheck Enabled for the Triggers Service after Provisioning

When the [Triggers Service][{{% ctx %}} Triggers Service] is provisioned by the [Provisioning Service][{{% ctx %}} Provisioning Service], a request will be made from the Provisioning Service to the LoadBalancer updating the configuration and enabling health checks for the Triggers Service. This allows the built in LoadBalancer to route messages to healthy and available Triggers Service.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} Provisioning Service][]
  * [{{% ctx %}} Triggers Service][]

##### LoadBalancer HealthCheck Improvements

The built in load balancer has been improved to more efficiently check if both the [API Gateway Service][{{% ctx %}} API Gateway Service] and the [Triggers Service][{{% ctx %}} Triggers Service] are healthy and available, now checking which partitions are available and routing messages and requests to healthy partitions.

Affected Components:

* {{% ctx %}} App Server Install Scripts

#### Platform Visibility

##### A New Platform Property has been Added to Provide more Information in Logs

A new property called `Platform` has been added to all platform logs, which replaces `Service`, containing information related to the platform in which the log was written.

`Platform` contains the following information:

``` json
"Platform": {
  "Node": {
    "Name": "_Node_0",
    "IpAddressOrFqdn": "machine.address",
    "Versions" : {
      "OperatingSystem": "Microsoft Windows NT 10.0.19045.0",
      "DotNet": "6.0.26",
      "ServiceFabric": "10.0.1949.9590",
      "NServiceBus": "7.8.4",
      "Rabbitmq": "3.10.6",
      "Erlang": "25.0.4",
      "$type": "VersionDetails"
    },
    "$type": "NodeDetails"
  },
  "Application": {
    "Name": "fabric:/Core/Services",
    "Type": "Cortex.Innovation.Core",
    "Version": "41.3.0.24130",
    "$type": "ServiceFabricApplicationDetails"
  },
  "Service": {
    "Name": "fabric:/Core/Services/ApiGateway",
    "Type": "ApiGateway",
    "Version": "32.2.0.24130",
    "PartitionId": "4cf98b39-3093-42c4-b88a-6ad4711cf389",
    "ReplicaOrInstanceId": "133511894962823718",
    "$type": "ServiceFabricServiceDetails"
  },
  "Version": "2024.3",
  "$type": "PlatformDetails"
}
```

| Property Name                          | Notes                                                                                             |
|----------------------------------------|---------------------------------------------------------------------------------------------------|
| `Platform.Node.Name`                   | Name of the node in which the log was written                                                     |
| `Platform.Node.IpAddressOrFqdn`        | Name of the IP Address or Fully Qualified Domain Name of the machine in which the log was written |
| `Platform.Versions.OperatingSystem`    | Operating system name and version of the machine in which the log was written                     |
| `Platform.Versions.DotNet`             | Version of the DotNet used by the machine in which the log was written                            |
| `Platform.Versions.ServiceFabric`      | Version of the ServiceFabric used by the machine in which the log was written                     |
| `Platform.Versions.NServiceBus`        | Version of the NServiceBus used by the machine in which the log was written                       |
| `Platform.Versions.Rabbitmq`           | Version of the Rabbitmq used by the machine in which the log was written                          |
| `Platform.Versions.Erlang`             | Version of the Erlang used by the machine in which the log was written                            |
| `Platform.Application.Name`            | Name of the application in which the log was written                                              |
| `Platform.Application.Type`            | Type of the application in which the log was written                                              |
| `Platform.Application.Version`         | Version of the application type in which the log was written                                      |
| `Platform.Service.Name`                | Name of the service in which the log was written                                                  |
| `Platform.Service.Type`                | Type of the service in which the log was written                                                  |
| `Platform.Service.Version`             | Version of the service type in which the log was written                                          |
| `Platform.Service.PartitionId`         | PartitionId of the service in which the log was written                                           |
| `Platform.Service.ReplicaOrInstanceId` | ReplicaOrInstanceId of the service in which the log was written                                   |
| `Platform.Version`                     | Version of {{% ctx %}}                                                                            |

Note: If Logs were being consumed and the `Service` property was used programmatically, these references will need to be updated to use the new `Service` property within Platform, otherwise references to the old `Service` property will break.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Authorisation Service][]
  * [{{% ctx %}} Concurrency Management Service][]
  * [{{% ctx %}} Configuration Management Service][]
  * [{{% ctx %}} Data Storage Service][]
  * [{{% ctx %}} Execution Management Service][]
  * [{{% ctx %}} Licence Management Service][]
  * [{{% ctx %}} Package Management Service][]
  * [{{% ctx %}} Provisioning Service][]
  * [{{% ctx %}} Scheduling Service][]
  * [{{% ctx %}} Triggers Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]

##### Request Duration is now Logged in Seconds Instead of Milliseconds

The `InMilliseconds` has been replaced with the `InSeconds` property, which contains the duration of the event being logged in seconds instead of milliseconds.

Note: If Logs were being consumed and the `InMilliseconds` property was used programmatically, these references will need to be updated to use the new `InSeconds` property, otherwise references to the old `InMilliseconds` property will break.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Authorisation Service][]
  * [{{% ctx %}} Concurrency Management Service][]
  * [{{% ctx %}} Configuration Management Service][]
  * [{{% ctx %}} Data Storage Service][]
  * [{{% ctx %}} Execution Management Service][]
  * [{{% ctx %}} Licence Management Service][]
  * [{{% ctx %}} Package Management Service][]
  * [{{% ctx %}} Provisioning Service][]
  * [{{% ctx %}} Scheduling Service][]
  * [{{% ctx %}} Triggers Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]

##### Type and Method Added to Platform Logs

The `Type` property has been updated to contain a friendly name for any log written by the platform and a new property called `Method` has been added to all platform logs, containing the Method in which the log was written.

These properties can be used to more easily filter and group logs programmatically.

Note: If Logs were being consumed and the `Type` property was used programmatically, these references will need to be updated to use the new `Method` property, otherwise references to the old `Type` property may not work as expected.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Authorisation Service][]
  * [{{% ctx %}} Concurrency Management Service][]
  * [{{% ctx %}} Configuration Management Service][]
  * [{{% ctx %}} Data Storage Service][]
  * [{{% ctx %}} Execution Management Service][]
  * [{{% ctx %}} Licence Management Service][]
  * [{{% ctx %}} Package Management Service][]
  * [{{% ctx %}} Provisioning Service][]
  * [{{% ctx %}} Scheduling Service][]
  * [{{% ctx %}} Triggers Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]
  
##### Custom Tags can be Passed Through Logs via Headers

A new custom header, `customTags`, can be used when making any request to [{{% ctx %}} API Gateway Service][] in order to add custom tags to any log related to the API request made.

The `customTags` header allows for a Dictionary<string, object> to be passed in along the header, which is then used as a collection of custom tags that will be added to any log related to the initial API request made.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Authorisation Service][]
  * [{{% ctx %}} Concurrency Management Service][]
  * [{{% ctx %}} Configuration Management Service][]
  * [{{% ctx %}} Data Storage Service][]
  * [{{% ctx %}} Execution Management Service][]
  * [{{% ctx %}} Licence Management Service][]
  * [{{% ctx %}} Package Management Service][]
  * [{{% ctx %}} Provisioning Service][]
  * [{{% ctx %}} Scheduling Service][]
  * [{{% ctx %}} Triggers Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]

##### Exception Tags Added to Logs Related to Exceptions or Problem Details

Logs related to Exceptions or Problem Details now contain extended Cortex Tags.

Logs related to Exceptions have had the following tags added:

* `Exception.Type` - This tag contains the type of exception that has been thrown
* `Exception.Category` - This optional tag contains the category of the exception that has been thrown, it is only added to the tags if the exception has a category property
* `Exception.ErrorCode` - This optional tag contains the error code of the exception that has been thrown, it is only added to the tags if the exception has an error code property

Logs related to Problem Details will update the `Result` tag to contain ProblemDetails.Type showing why the request has failed, logs related to successful API calls will contain a `Result` tag with the value `"Success"`

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Authorisation Service][]
  * [{{% ctx %}} Concurrency Management Service][]
  * [{{% ctx %}} Configuration Management Service][]
  * [{{% ctx %}} Data Storage Service][]
  * [{{% ctx %}} Execution Management Service][]
  * [{{% ctx %}} Licence Management Service][]
  * [{{% ctx %}} Package Management Service][]
  * [{{% ctx %}} Provisioning Service][]
  * [{{% ctx %}} Scheduling Service][]
  * [{{% ctx %}} Triggers Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]

##### Flow Logging Control

An API route has been added to API Gateway which allows for configuration of logging for flows running within {{% ctx %}} Platform and the current flow logging `LogLevel` of the execution application can be changed and updated at runtime.

If the Execution Application flow logging is set to a `LogLevel` between `LogLevel.Trace` (`0`) and `LogLevel.Critical` (`5`) then flow logging will be enabled. Any flow logs with a `LogLevel` lower than the configured `LogLevel` for the platform will not be logged. Information regarding the types of log level and what logs are written at a given level can be found below:

| Log Level                                  | Service Logs at this LogLevel                      |
|--------------------------------------------|----------------------------------------------------|
| <nobr>`LogLevel.Trace` (`0`) </nobr>       | None                                               |
| <nobr>`LogLevel.Debug` (`1`) </nobr>       | Logs written when: a flow completes successfully   |
| <nobr>`LogLevel.Information` (`2`) </nobr> | None                                               |
| <nobr>`LogLevel.Warning` (`3`) </nobr>     | None                                               |
| <nobr>`LogLevel.Error` (`4`) </nobr>       | Logs written when: a flow completes unsuccessfully |
| <nobr>`LogLevel.Critical` (`5`) </nobr>    | None                                               |
| <nobr>`LogLevel.None` (`6`) </nobr>        | Turns off Flow Logging                             |

If a Log Level above `LogLevel.Critical` (`5`) is provided, then flow logging across the platform will be disabled.

Note: Flow logging should have a minimal impact on the performance of running flows.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Configuration Management Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]

##### Block Logging Control

An API route has been added to API Gateway which allows for configuration of logging for block running within {{% ctx %}} Platform and the current block logging `LogLevel` of the execution application can be changed and updated at runtime.

If the Execution Application block logging is set to a `LogLevel` between `LogLevel.Trace` (`0`) and `LogLevel.Critical` (`5`) then block logging will be enabled. Any block logs with a `LogLevel` lower than the configured `LogLevel` for the platform will not be logged. Information regarding the types of log level and what logs are written at a given level can be found below:

| Log Level                                  | Service Logs at this LogLevel                      |
|--------------------------------------------|----------------------------------------------------|
| <nobr>`LogLevel.Trace` (`0`) </nobr>       | None                                               |
| <nobr>`LogLevel.Debug` (`1`) </nobr>       | Logs written when: a block executes successfully   |
| <nobr>`LogLevel.Information` (`2`) </nobr> | None                                               |
| <nobr>`LogLevel.Warning` (`3`) </nobr>     | None                                               |
| <nobr>`LogLevel.Error` (`4`) </nobr>       | Logs written when: a block executes unsuccessfully |
| <nobr>`LogLevel.Critical` (`5`) </nobr>    | None                                               |
| <nobr>`LogLevel.None` (`6`) </nobr>        | Turns off Block Logging                            |

If a Log Level above `LogLevel.Critical` (`5`) is provided, then block logging across the platform will be disabled.

Note: Block logging will have a large impact on the performance of running flows, it is advised to only turn block logging on when investigating issues with running flows.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Configuration Management Service][]
* [{{% ctx %}} Innovation Execution Application][]
  * [{{% ctx %}} Execution Service][]

##### Running Executions can be Viewed in Real-Time

The Package Management page with [Gateway][] has been updated to include an overview of all executions running within the platform.

A column named `Running Executions` has been added to the package management grid, showing the total number of executions running for the latest package version and any older package version.

Also, a `Running Executions` tab has been added to the package definition view shown when a specific version of a package has been selected. This new tab shows a table of details related to any running executions for the selected package version. The following information is displayed for each executions:

* Flow Name - The name of the flow that the execution is currently running
* Execution Id - The Id of the execution
* Started At - The time at which the execution started
* Duration - The total duration of the execution

The `Running Executions` will be updated every 10 seconds, refreshing all data accordingly. You may perform any of the following actions in order to stop receiving live updates

* Close the browser
* Close the browser tab
* Lose network connectivity
* Navigate to another page within [Gateway][]

This lays the foundations in future releases for allowing control of both production and debug executions at runtime using the `Running Executions` grid.

Affected Components:

* [{{% ctx %}} Innovation Core Application][]
  * [{{% ctx %}} API Gateway Service][]
  * [{{% ctx %}} Execution Management Service][]
* [{{% ctx %}} Gateway][Gateway]

##### Grafana and Promtail Updated to use the New and Updated Properties Added to Platform Logs

Grafana and Promtail have been updated to use the following changed properties within logs:

* [A New Platform Property has been Added to Provide more Information in Logs][]
* [Request Duration is now Logged in Seconds Instead of Milliseconds][]
* [Type and Method Added to Platform Logs][]

Affected Components:

* TODO

#### Platform Security

##### Remove Plaintext Password from GetLDAPConnection Response Message

Previously, the GetLDAPConnection could return a plaintext password within the payload of the response, this has been sanitised and removed.

Affected Components:

* [{{% ctx %}} Gateway][Gateway]

#### Platform Upgrades

##### A New Flow Upgrader Tool has been Created to Upgrade Flows

A new Flows Upgrader tool has been added that allows users to upgrade flows so that they are compatible when upgrading their platform from one version of {{% ctx %}} to the next, e.g. upgrading flows from 2024.1 to be compatible with the new features introduced in 2024.3

In order to use this tool:

* Flows must be exported to a studio package (e.g. `"{name}.studiopkg"`)
* Then the tool must be run, pointed at the exported studio package
* The original studio package will be left unchanged, but a new upgraded package will be created (e.g. `"{name}-{previous version}UpgradedTo{new version}.studiopkg"`)

In future releases this tool may be integrated into the upgrade scripts or gateway in order to automatically upgrade flows when upgrading to a new version of the {{% ctx %}} platform.

Affected Components:

* {{% ctx %}} Flows Upgrader

##### A New Single Server Upgrade Script has been Added to the Installation Artefacts

A new script for upgrading Single Server deployments of the {{% ctx %}} Platform has been created. [Upgrade Instructions][] have been added for how to use this script to upgrade a system from 2024.1 to 2024.3.

Affected Components:

* {{% ctx %}} App Server Install Scripts

##### Upgrading a Multi Server Platform now also upgrades Gobetween on the Load Balancer

The Multi Server upgrades scripts have been improved to also upgrade Gobetween on the Load Balancer, this includes updating any health check mechanisms and persists settings within the load balancer. [Upgrade Instructions][] have been added for how to use this script to upgrade a system from 2024.1 to 2024.3.

Affected Components:

* {{% ctx %}} App Server Install Scripts

#### Block Icon Redesign

All block icons within the {{% ctx %}} Platform have been redesigned and overhauled. The refresh includes new icons for every block updating the consistency of design and accessability of colours used within flows.

The following changes have been made for block icons:

* All Exception Handling blocks are now red and triangle shaped (except the Handle Flow Exception block, which is rectangle due to containing a workspace)
* All Action blocks are now blue and square
* All Action blocks have consistent designs based on their palette
* All Decision blocks are now yellow and diamond shaped
* All Workspace blocks are now grey (except the Handle Flow Exception block, which is red due to being an exception handling block) and rectangle shaped

Further improvements may be made to the design of block icons in a future release.

Affected Components:

* [{{% ctx %}} Block Packages][Blocks]
* [{{% ctx %}} Gateway][Gateway]

#### Improved Blocks

The following [Blocks][] have been improved as part of this release of the platform:

* [ExecuteDataCommand][] - A new Parameter type has been added for requests made to Oracle data sources, this new parameter allows for control of the OracleMappingType and ParameterDirection, which allows for processes like passing of larger data sets (CLOB) to an Oracle stored procedure

Affected Components:

* [{{% ctx %}} Block Packages][Blocks]

#### Improved Installation

The installation process of the {{% ctx %}} Platform has been improved in the following ways:

* The installation scripts have been updated further to remove references to hard coded drive paths, and now uses environment variables

Affected Components:

* {{% ctx %}} App Server Install Scripts
* {{% ctx %}} Web App Server Install Scripts

#### Product Portal

Reference documentation has been updated for the [improved blocks][Improved Blocks] and related data types, improvements have been made to all [Exceptions][] and [Data Types][], and the documentation has been updated to reflect the [improved installation][] and new [platform upgrades][TODO] documentation.

### Bug Fixes

The following bugs have been fixed in the 2024.1 release of the {{% ctx %}} Platform:

#### Platform Visibility

##### Log Level for the Triggers Service does not Update

Previously, when changing the log level of the platform, the triggers service would not be updated, this has now been fixed and the triggers service respects the log level set.

##### Platform Health Dashboard queries that use the JSON Parser can Cause Timeouts

Previously, a number of queries created using json parser in within the Platform Health dashboard, could cause Loki to use a large amount of memory leading to timeouts. This has been fixed by using a scoped json parser to create these queries.

##### Flow Execution Requests Dashboard queries that use the JSON Parser can Cause Timeouts

Previously, a number of queries created using json parser in within the Flow Execution Requests dashboard, could cause Loki to use a large amount of memory leading to timeouts. This has been fixed by using a scoped json parser to create these queries.

#### CORTEX Studio

##### Newly Created, Top-Level groups are not Displayed in Charms until the Authorisation has been Modified

Previously, newly created, Top-Level groups would not be displayed within the Charms until any change had been made to the Studio Authorisation, this has now been fixed.

##### Making changes to a Flow Before the Call to Update the Model Completes After a Commit can cause the Flow to be Corrupted

Previously, if a change is made to a flow after a commit but before the AreFlowsBehind call finishes, the flow had a chance of becoming corrupted. This has now been fixed.

#### Product Portal

##### Incorrect Text in Shortcut Links

A number of hyperlinks within the Product Portal were broken due to incorrect shortcodes cause incorrect text to be inserted into the url, this has now been fixed.

### Deprecated Features

There are no features deprecated as part of the 2024.1 release of the {{% ctx %}} Platform.

### Removed Features

There are no features removed in the 2024.1 release of the {{% ctx %}} Platform:

### Potential Breaking Changes

The following features are potentially breaking changes in the 2024.1 release of the {{% ctx %}} Platform:

#### Platform Visibility

The following features related to [Platform Visibility][] could potentially break interactions with properties within logs generated byt the {{% ctx %}} Platform:

* [A New Platform Property has been Added to Provide more Information in Logs][]
* [Request Duration is now Logged in Seconds Instead of Milliseconds][]
* [Type and Method Added to Platform Logs][]

Grafana and Promtail have been [updated to use the new and updated properties][Grafana and Promtail Updated to use the New and Updated Properties Added to Platform Logs] added to the platform logs.

### Breaking Changes

There are no known breaking changes as part of the 2024.1 release of the {{% ctx %}} Platform.

### Known Limitations

There are no known known limitations added as part of the 2024.1 release of the {{% ctx %}} Platform:

## Version Support

### Operating Systems

| OS Type | Supported Versions |
|-|-|-|
| Windows | <ul><li>Server 2019</li><li>Server 2022</li></ul> |
| Linux | Linux is not currently supported |

### 7.X Compatibility

| 7.X Version | Is compatible? | Notes                                        |
|-------------|----------------|----------------------------------------------|
| 7.2         | Yes            |                                              |
| 7.1         | No             | Need to upgrade 7.1 to 7.2 for compatibility |
| 7.0         | No             | Need to upgrade 7.0 to 7.2 for compatibility |

## Install Instructions

If you are installing a new 2024.3 platform or adding it to an existing 7.2 Installation see the guidance below; otherwise, if you are upgrading from an existing 2024.1 platform refer to the [Upgrade Instructions][].

Installing {{% ctx %}} Only:

* [Multiple Server - With HA][Innovation Only - Multiple Server - With HA]
* [Single Server - Without HA][Innovation Only - Single Server - Without HA]

Adding {{% ctx %}} to a 7.2 Installation:

* [Multiple Server - With HA][Adding Innovation to a 7.2 Installation - Multiple Server - With HA]
* [Single Server - Without HA][Adding Innovation to a 7.2 Installation - Single Server - Without HA]

## Upgrade Instructions

if you are upgrading from an existing 2024.1 platform see the guidance below:

Upgrading {{% ctx %}}:

* [Multiple Server - With HA][TODO]
* [Single Server - Without HA][TODO]

## Upcoming Releases

Releases are currently forecast to be made available on:

| Release | Release Type   | Forecast Release Date               |
|---------|----------------|-------------------------------------|
| 2024.5  | [Fast Track][] | Week commencing 3rd June 2024       |
| 2024.7  | [Release][]    | Week commencing 29th July 2024      |
| 2024.9  | [Fast Track][] | Week commencing 23rd September 2024 |
| 2024.11 | [Fast Track][] | Week commencing 18th November 2024  |

Any changes to these forecasts will be announced via the [News channel][].

[{{% ctx %}} Innovation Core Application]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.MainDoc" version="2024.3" >}}
[{{% ctx %}} API Gateway Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.ApiGatewayService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Authorisation Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.AuthorisationService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Concurrency Management Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.ConcurrencyManagementService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Configuration Management Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.ConfigurationManagementService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Data Storage Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.DataStorageService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Execution Management Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.ExecutionManagementService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Licence Management Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.LicenceManagementService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Package Management Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.PackageManagementService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Provisioning Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.ProvisioningService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Scheduling Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.SchedulingService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Triggers Service]: {{< url path="Cortex.Guides.CortexInnovation.CoreApplication.Services.TriggersService.MainDoc" version="2024.3" >}}
[{{% ctx %}} Innovation Execution Application]: {{< url path="Cortex.Guides.CortexInnovation.ExecutionApplication.MainDoc" version="2024.3" >}}
[{{% ctx %}} Execution Service]: {{< url path="Cortex.Guides.CortexInnovation.ExecutionApplication.Services.ExecutionService.MainDoc" version="2024.3" >}}
[Interaction Portal]: {{< url path="Cortex.Guides.CortexInteractionPortal.MainDoc" version="2024.3" >}}

[Platform Performance Improvements]: {{< ref "#platform-performance-improvements" >}}
[Caching Added to the Provisioning Service]: {{< ref "#caching-added-to-the-provisioning-service" >}}
[HealthCheck Enabled for the Triggers Service after Provisioning]: {{< ref "#healthcheck-enabled-for-the-triggers-service-after-provisioning" >}}
[LoadBalancer HealthCheck Improvements]: {{< ref "#loadbalancer-healthcheck-improvements" >}}

[Platform Visibility]: {{< ref "#platform-visibility" >}}
[A New Platform Property has been Added to Provide more Information in Logs]: {{< ref "#a-new-platform-property-has-been-added-to-provide-more-information-in-logs" >}}
[Request Duration is now Logged in Seconds Instead of Milliseconds]: {{< ref "#request-duration-is-now-logged-in-seconds-instead-of-milliseconds" >}}
[Type and Method Added to Platform Logs]: {{< ref "#type-and-method-added-to-platform-logs" >}}
[Custom Tags can be Passed Through Logs via Headers]: {{< ref "#custom-tags-can-be-passed-through-logs-via-headers" >}}
[Exception Tags Added to Logs Related to Exceptions or Problem Details]: {{< ref "#exception-tags-added-to-logs-related-to-exceptions-or-problem-details" >}}
[Flow Logging Control]: {{< ref "#flow-logging-control" >}}
[Block Logging Control]: {{< ref "#block-logging-control" >}}
[Running Executions can be Viewed in Real-Time]: {{< ref "#running-executions-can-be-viewed-in-real-time" >}}
[Grafana and Promtail Updated to use the New and Updated Properties Added to Platform Logs]: {{< ref "#grafana-and-promtail-updated-to-use-the-new-and-updated-properties-added-to-platform-logs" >}}

[Remove Plaintext Password from GetLDAPConnection Response Message]: {{< ref "#remove-plaintext-password-from-getldapconnection-response-message" >}}

[A New Flow Upgrader Tool has been Created to Upgrade Flows]: {{< ref "#a-new-flow-upgrader-tool-has-been-created-to-upgrade-flows" >}}
[A New Single Server Upgrade Script has been Added to the Installation Artefacts]: {{< ref "#a-new-single-server-upgrade-script-has-been-added-to-the-installation-artefacts" >}}
[Upgrading a multi server platform now also upgrades Gobetween on the Load Balancer]: {{< ref "#upgrading-a-multi-server-platform-now-also-upgrades-gobetween-on-the-load-balancer" >}}

[Block Icon Redesign]: {{< ref "#block-icon-redesign" >}}

[Improved Blocks]: {{< ref "#improved-blocks" >}}
[Product Portal]: {{< ref "#product-portal" >}}

[Upgrade Instructions]: {{< ref "#upgrade-instructions" >}}
[improved installation]: {{< ref "#improved-installation" >}}
[Potentially Breaking - Blocks]: {{< ref "#improved-blocks-1" >}}

[News channel]: {{< url path="Cortex.Blogs.News.MainDoc" >}}

[Blocks]: {{< url path="Cortex.Reference.Blocks.MainDoc" version="2024.3" >}}
[Data Types]: {{< url path="Cortex.Reference.DataTypes.MainDoc" version="2024.3" >}}
[Exceptions]: {{< url path="Cortex.Reference.Exceptions.MainDoc" version="2024.3" >}}

[ExecuteDataCommand]: {{< url path="Cortex.Reference.Blocks.Data.ExecuteDataCommand.ExecuteDataCommand.MainDoc" version="2024.3" >}}

[Innovation Only - Single Server - Without HA]: {{< url path="Cortex.GettingStarted.OnPremise.InstallInnovationOnly.SingleServerWithoutHA.MainDoc" version="2024.3" >}}
[Innovation Only - Multiple Server - With HA]: {{< url path="Cortex.GettingStarted.OnPremise.InstallInnovationOnly.MultipleServerWithHA.MainDoc" version="2024.3" >}}

[Adding Innovation to a 7.2 Installation - Single Server - Without HA]: {{< url path="Cortex.GettingStarted.OnPremise.AddInnovationTo72.SingleServerWithoutHA.MainDoc" version="2024.3" >}}
[Adding Innovation to a 7.2 Installation - Multiple Server - With HA]: {{< url path="Cortex.GettingStarted.OnPremise.AddInnovationTo72.MultipleServerWithHA.MainDoc" version="2024.3" >}}

[Innovation Only Upgrade - Single Server - Without HA]: {{< url path="Cortex.GettingStarted.OnPremise.InstallInnovationOnly.SingleServerWithoutHA.MainDoc" version="2024.3" >}}
[Innovation Only Upgrade - Multiple Server - With HA]: {{< url path="Cortex.GettingStarted.OnPremise.InstallInnovationOnly.MultipleServerWithHA.MainDoc" version="2024.3" >}}

[{{% ctx %}} Studio]: {{< url path="Cortex.Guides.Studio.MainDoc" version="2024.3" >}}
[Gateway]: {{< url path="Cortex.Guides.Gateway.MainDoc" version="2024.3" >}}

[{{% ctx %}} Service Portal]: {{< url path="Cortex.ServicePortal.MainDoc" version="2024.3" >}}

[Fast Track]: {{< url path="Cortex.Reference.Glossary.F-J.FastTrack" version="2024.3" >}}
[Release]: {{< url path="Cortex.Reference.Glossary.P-T.Release" version="2024.3" >}}

[Grafana]: {{< url path="Grafana.MainDoc" >}}
